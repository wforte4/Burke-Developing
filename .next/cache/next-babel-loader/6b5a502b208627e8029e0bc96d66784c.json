{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\nimport { baseConfig } from '../../services/restservice';\nimport Theme from '../../styles/theme';\n\nfunction UploadImage({\n  firstLoadImages\n}) {\n  const {\n    0: images,\n    1: setImages\n  } = useState(firstLoadImages);\n  const {\n    0: file,\n    1: setFile\n  } = useState(null);\n  const {\n    0: preview,\n    1: setPreview\n  } = useState(null);\n  const {\n    0: multipreview,\n    1: setMultiPreview\n  } = useState(null);\n  const {\n    0: loadingImages,\n    1: setLoadingImages\n  } = useState(false);\n\n  const uploadImageSingle = async e => {\n    e.preventDefault();\n    if (file == null) return;\n    const formData = new FormData();\n    formData.append(\"myFile\", file);\n    const uploadImage = await fetch(baseConfig.baseURL + '/uploadfile', {\n      method: 'POST',\n      body: formData\n    }).then(response => {\n      return response.json();\n    });\n\n    if (uploadImage) {\n      setPreview(null);\n      setFile(null);\n      loadImages(e);\n    }\n  };\n\n  const uploadImageMultiple = async e => {\n    e.preventDefault();\n    console.log(multipreview);\n    if (multipreview == null) return;\n    const formData = new FormData();\n\n    for (let i = 0; i < file.length; i++) {\n      console.log(file[i]);\n      formData.append(`myFiles`, file[i]);\n    }\n\n    console.log(formData);\n    const newupload = await fetch(baseConfig.baseURL + '/uploadmultiple', {\n      method: 'POST',\n      body: formData\n    }).then(response => {\n      return response.json();\n    });\n    console.log(newupload);\n\n    if (newupload) {\n      setMultiPreview(null);\n      setFile(null);\n      console.log(newupload);\n      loadImages(e);\n    }\n  };\n\n  const handleFileChangeSingle = e => {\n    e.persist();\n    setPreview(URL.createObjectURL(e.target.files[0]));\n    setFile(e.target.files[0]);\n    console.log(e.target.files[0]);\n  };\n\n  const handleFileChangeMulti = e => {\n    e.persist();\n    setFile(e.target.files);\n    const files = e.target.files;\n    const mpreview = [];\n\n    for (var i = 0; i < files.length; i++) {\n      mpreview.push(URL.createObjectURL(files[i]));\n    }\n\n    setMultiPreview(mpreview);\n  };\n\n  const removeImage = async (e, image) => {\n    e.persist();\n    setLoadingImages(true);\n    setImages(null);\n    const newremove = await fetch(baseConfig.baseURL + '/removeimage/' + image, {\n      method: 'DELETE'\n    }).then(response => {\n      return response.status;\n    });\n\n    if (newremove) {\n      console.log(newremove);\n      loadImages(e);\n    }\n  };\n\n  const loadImages = async e => {\n    e.preventDefault();\n    setLoadingImages(true);\n    const getImages = await fetch('http://localhost:3600/getallimages', {\n      method: 'GET'\n    }).then(response => {\n      return response.json();\n    });\n\n    if (getImages) {\n      setImages(getImages.images);\n    }\n  };\n\n  const doneLoading = e => {\n    e.persist();\n    setLoadingImages(false);\n  };\n\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'body'\n  }, __jsx(\"div\", {\n    id: \"left\",\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n  }, __jsx(\"h2\", {\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n  }, \"Single Image Upload\"), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'uploadform'\n  }, __jsx(\"form\", {\n    onSubmit: uploadImageSingle,\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'previewframe'\n  }, __jsx(\"img\", {\n    src: preview ? preview : '/imageplaceholder.png',\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'preview'\n  })), __jsx(\"label\", {\n    htmlFor: \"fileid\",\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n  }, file ? file.name : 'Select image'), __jsx(\"input\", {\n    id: \"fileid\",\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: handleFileChangeSingle,\n    required: true,\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n  }, \"Upload Image\"))), __jsx(\"h2\", {\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n  }, \"Multiple Image Upload\"), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'uploadform'\n  }, __jsx(\"form\", {\n    onSubmit: uploadImageMultiple,\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'previewframe'\n  }, multipreview == null ? __jsx(\"img\", {\n    src: \"/imageplaceholder.png\",\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'preview'\n  }) : multipreview.map((image, i) => {\n    return __jsx(\"div\", {\n      className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'imgframepreview'\n    }, __jsx(\"img\", {\n      src: image,\n      className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n    }));\n  })), __jsx(\"label\", {\n    htmlFor: \"fileidmulti\",\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n  }, \"Select images\"), __jsx(\"input\", {\n    id: \"fileidmulti\",\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: handleFileChangeMulti,\n    required: true,\n    multiple: true,\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n  }, \"Upload Images\")))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'images'\n  }, __jsx(\"h1\", {\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n  }, \"My Images\"), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'imageholder'\n  }, images != null ? images.map((image, i) => {\n    if (i == images.length - 1) {\n      return __jsx(\"div\", {\n        key: i,\n        className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'imgframe'\n      }, __jsx(\"div\", {\n        onClick: e => removeImage(e, image),\n        className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'x'\n      }, \"x\"), __jsx(\"img\", {\n        onLoad: doneLoading,\n        src: baseConfig.backendImages + image,\n        className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n      }), __jsx(\"h3\", {\n        className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n      }, image.split('').map((char, i) => {\n        if (i > 13) return char;\n      })));\n    } else {\n      return __jsx(\"div\", {\n        key: i,\n        className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'imgframe'\n      }, __jsx(\"div\", {\n        onClick: e => removeImage(e, image),\n        className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'x'\n      }, \"x\"), __jsx(\"img\", {\n        src: baseConfig.backendImages + image,\n        className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n      }), __jsx(\"h3\", {\n        className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n      }, image.split('').map((char, i) => {\n        if (i > 13) return char;\n      })));\n    }\n  }) : __jsx(\"h2\", {\n    onClick: loadImages,\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]])\n  }, \"Load Images\"), __jsx(\"img\", {\n    src: \"/loading_a.gif\",\n    className: _JSXStyle.dynamic([[\"511590385\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'loader'\n  }))), __jsx(_JSXStyle, {\n    id: \"511590385\",\n    dynamic: [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]\n  }, [\".imageholder.__jsx-style-dynamic-selector{float:left;width:90%;padding:20px 5%;height:500px;overflow-y:scroll;position:relative;margin-top:20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}\", `.loader.__jsx-style-dynamic-selector{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);display:${loadingImages ? 'block' : 'none'};width:52px;height:52px;}`, `.imgframe.__jsx-style-dynamic-selector{float:left;width:150px;height:120px;margin:8px;overflow:hidden;position:relative;background:rgba(200,200,200,.2);box-shadow:0 0 1px ${Theme.colors.gunmetal};}`, `.imgframe.__jsx-style-dynamic-selector h3.__jsx-style-dynamic-selector{position:absolute;bottom:0;text-align:center;left:0;width:100%;padding:10px 0;margin:0;background:rgba(255,255,255,.7);color:${Theme.colors.gunmetal};font:12px 'Open Sans';}`, \".imgframe.__jsx-style-dynamic-selector img.__jsx-style-dynamic-selector{position:absolute;width:100%;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}\", \".x.__jsx-style-dynamic-selector{position:absolute;right:10px;top:10px;padding:0 8px;padding-bottom:4px;text-align:center;font:18px 'Roboto';cursor:pointer;opacity:.7;-webkit-transition:all .3s ease;transition:all .3s ease;z-index:999;background:rgba(255,255,255,1);}\", \".x.__jsx-style-dynamic-selector:hover{opacity:1;}\", \".images.__jsx-style-dynamic-selector{float:left;width:60%;}\", \".images.__jsx-style-dynamic-selector h1.__jsx-style-dynamic-selector{float:left;font:30px 'Montserrat';margin:0;margin-left:30px;padding:10px;}\", \".uploadform.__jsx-style-dynamic-selector input.__jsx-style-dynamic-selector{display:none;}\", \".uploadform.__jsx-style-dynamic-selector label.__jsx-style-dynamic-selector{position:absolute;top:60px;left:20px;padding:10px;cursor:pointer;opacity:.7;-webkit-transition:all .3s ease;transition:all .3s ease;font:14px 'Roboto';}\", \".uploadform.__jsx-style-dynamic-selector label.__jsx-style-dynamic-selector:hover{opacity:1;}\", \".uploadform.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector{position:absolute;bottom:90px;left:20px;padding:10px;cursor:pointer;opacity:.7;-webkit-transition:all .3s ease;transition:all .3s ease;font:14px 'Roboto';}\", \".uploadform.__jsx-style-dynamic-selector .previewframe.__jsx-style-dynamic-selector{position:absolute;right:20px;top:20px;width:300px;max-height:300px;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;}\", \".uploadform.__jsx-style-dynamic-selector .previewframe.__jsx-style-dynamic-selector .preview.__jsx-style-dynamic-selector{float:left;width:100%;height:auto;}\", \".previewframe.__jsx-style-dynamic-selector .imgframepreview.__jsx-style-dynamic-selector{float:left;width:80px;height:80px;margin:5px;position:relative;}\", \".imgframepreview.__jsx-style-dynamic-selector img.__jsx-style-dynamic-selector{width:100%;height:100%;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}\", \".uploadform.__jsx-style-dynamic-selector form.__jsx-style-dynamic-selector{float:left;width:100%;height:100%;}\", \".uploadform.__jsx-style-dynamic-selector{float:left;width:100%;position:relative;min-height:300px;}\", `#left.__jsx-style-dynamic-selector h2.__jsx-style-dynamic-selector{float:left;margin:0;width:90%;padding:10px 5%;box-shadow:0 0 1px ${Theme.colors.charcoal};font:22px 'Raleway';}`, \"#left.__jsx-style-dynamic-selector{float:left;width:40%;height:100%;}\", \".body.__jsx-style-dynamic-selector{float:left;width:100%;height:100%;margin-top:90px;}\"]));\n}\n\nUploadImage.getInitialProps = async e => {\n  const getimg = await fetch(baseConfig.baseURL + '/getallimages', {\n    method: 'GET'\n  }).then(response => {\n    return response.json();\n  });\n  return {\n    firstLoadImages: getimg.images\n  };\n};\n\nexport default UploadImage;","map":null,"metadata":{},"sourceType":"module"}