{"ast":null,"code":"import { catchAxiosError } from \"./error\";\nimport { post, get, postFile } from \"./restservice\";\nimport Router from 'next/router';\nimport { Cookies } from 'react-cookie';\nconst cookies = new Cookies();\nexport const backendImages = \"https://zerorevision.com/restapi/uploadimages/\";\nexport async function createProfile(fullname, email, newpassword, image) {\n  // Request data to post to createprofile route on rest api\n  const data = new URLSearchParams({\n    fullname,\n    email,\n    newpassword,\n    image\n  });\n  const res = await post(\"/createprofile\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  if (!res.data) return \"Something wrong\";\n  return res.data.status;\n}\nexport async function resetPassword(email, newpassword) {\n  const data = new URLSearchParams({\n    email,\n    newpassword\n  });\n  const res = await post(\"/resetpass\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  return res.data.status;\n}\nexport async function confirmEmail(fullname, email) {\n  const data = new URLSearchParams({\n    fullname,\n    email\n  });\n  const res = await post(\"/confirmemailzr\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  return res.data.message;\n}\nexport async function forgotPass(email) {\n  const data = new URLSearchParams({\n    email\n  });\n  const res = await post(\"/forgotpass\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  return res.data.message;\n}\nexport async function checkConfirm(email, confirmation) {\n  const data = new URLSearchParams({\n    email,\n    confirmation\n  });\n  const res = await post(\"/checkconfirm\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  if (res.data) return res.data.status;\n}\nexport async function deleteProfile(user) {\n  const res = await get(`/removeuser/${user}`);\n  if (res.data) return res.data;\n  if (res.error) return res.error;\n  return res.data;\n}\nexport async function removeFile(filename) {\n  const res = await get(`/removefile/${filename}`).then(res => {\n    if (res.error) return res.error;\n    console.log(res.data.status);\n    return res.data.status;\n  });\n}\nexport async function removeUserFile(filepath, user) {\n  const data = new URLSearchParams({\n    filepath,\n    user\n  });\n  const res = await post(\"/removefile\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  return res.data.status;\n}\nexport const COOKIES = {\n  logintoken: \"indexplus.token.secured\"\n};\nexport async function Logout() {\n  cookies.remove('token');\n  localStorage.removeItem('user');\n  localStorage.removeItem('userFullName');\n  localStorage.removeItem('authorization');\n  localStorage.removeItem('expiration');\n  localStorage.removeItem('sub');\n  console.log(\"User logged out\");\n  await Router.push(\"/logout\");\n}\nexport async function loginRequest(email, password) {\n  // New Login Data request\n  const data = new URLSearchParams({\n    email,\n    password\n  });\n  const res = await post(\"/login\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n\n  if (res.data.error) {\n    return res.data.error;\n  }\n\n  const {\n    token\n  } = res.data.value;\n  localStorage.setItem('user', res.data.email);\n  localStorage.setItem('userFullName', res.data.fullname);\n  localStorage.setItem('authorization', res.data.value);\n  localStorage.setItem('expiration', res.data.exp);\n  localStorage.setItem('sub', res.data.sub);\n  cookies.set('token', res.data.value);\n  Router.push(\"/login\");\n}\nexport async function getProfile(user) {\n  const res = await get(`/getprofile/${user}`);\n  if (res.error) return res.error;\n  return res.data;\n}\nexport async function getStaticImages() {\n  const res = await get(\"/uploadedimages\");\n  return res.data;\n}\nexport async function getUserImages(user) {\n  const res = await get(`/uploadedimages/${user}`);\n  return res.data;\n} // Store Item and Post Upload Endpoints //\n\nexport async function getStoreItems(store) {\n  const res = await get(`/getstoreitems/${store}`);\n  if (res.error) return res.error;\n  if (!res.data) return \"Did not load or no items yet...\";\n  return res.data;\n}\nexport async function getStoreItemsByUser(owner) {\n  const res = await get(`/getstoreitemsbyuser/${owner}`);\n  if (res.error) return res.error;\n  if (!res.data) return \"Did not load or no items yet...\";\n  return res.data;\n}\nexport async function getStorePosts(store) {\n  const res = await get(`/getstoreposts/${store}`);\n  if (res.error) return \"noresponse\";\n  if (!res.data) return \"Did not load or no posts yet...\";\n  console.log(\"called get posts\");\n  return res.data;\n}\nexport async function getStorePost(postid) {\n  const res = await get(`/getstorepost/${postid}`);\n  if (res.error) return res.error;\n  if (!res.data) return \"Did not load the post\";\n  return res.data;\n}\nexport async function getStoreItem(itemid) {\n  const res = await get(`/getstoreitem/${itemid}`);\n  if (res.error) return res.error;\n  if (!res.data) return \"Did not load the item\";\n  return res.data;\n}\nexport async function likeItem(itemid) {\n  const res = await get(`/likeitem/${itemid}`);\n  if (res.error) return res.error;\n  return res.data.status;\n}\nexport async function dislikeItem(itemid) {\n  const res = await get(`/dislikeitem/${itemid}`);\n  if (res.error) return res.error;\n  return res.data.status;\n}\nexport async function getItemComments(itemid) {\n  const res = await get(`/getcomments/${itemid}`);\n  if (res.error) return res.error;\n  return res.data;\n}\nexport async function makeComment(owner, commentstring, connectingitem, rating) {\n  const data = new URLSearchParams({\n    owner,\n    commentstring,\n    connectingitem,\n    rating\n  });\n  const res = await post(\"/makecomment\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  if (res.data) return res.data.status;\n}\nexport async function getStoreAuth(user) {\n  const res = await get(`/getstoreauth/${user}`);\n  if (res.error) return res.error;\n  if (res.data.status) return \"No Store\";\n  return res.data;\n}\nexport async function makeNewAuth(storename, storeurl, username) {\n  const data = new URLSearchParams({\n    username,\n    storename,\n    storeurl\n  });\n  const res = await post(\"/makestoreauth\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  if (!res.data.status) \"Did not work\";\n  return res.data.status;\n}\nexport async function addStoreItem(itemname, itemdescription, itemprice, itemimage, itemstore, itemowner) {\n  const data = new URLSearchParams({\n    itemname,\n    itemdescription,\n    itemprice,\n    itemimage,\n    itemstore,\n    itemowner\n  });\n  const res = await post(\"/createstoreitem\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  if (!res.data.status) \"No Response\";\n  return res.data.itemid;\n}\nexport async function removeItem(id) {\n  const res = await get(`/deleteitem/${id}`);\n  if (res.error) return res.error;\n  return res.data.status;\n} // Shopping Card Session fetching and creating //\n// >> ADD TO CART\n// >> REMOVE FROM CART\n// >> GET SHOPPING SESSION (AUTO CREATES SESSION IF NOT EXISTS)\n// >> \n\nexport async function addToCart(email, item) {\n  const data = new URLSearchParams({\n    email,\n    item\n  });\n  const additem = await post('/addtocart', data).catch(catchAxiosError);\n  if (additem) return additem.data.status;\n}\nexport async function getShoppingSession(email) {\n  const res = await get(`/getshoppingsession/${email}`);\n  if (res) return res.data;\n}\nexport async function getCartItems(cartdata) {\n  const res = await get(`/getcartitems/${cartdata}`);\n  if (res) return res.data;\n}\nexport async function clearCart(email) {\n  localStorage.removeItem('cartsession');\n  const res = await get(`/clearcart/${email}`);\n  if (res) return res.data.status;\n}\nexport async function getpaymentintent(email, cartdata) {\n  const data = new URLSearchParams({\n    email,\n    cartdata\n  });\n  const res = await post(\"/paymentIntent\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  if (!res.data) return \"Did not load or no items yet...\";\n  return res.data.client_secret;\n}","map":{"version":3,"sources":["/Users/williamforte/Canvas/burkedeveloping/services/apiservice.js"],"names":["catchAxiosError","post","get","postFile","Router","Cookies","cookies","backendImages","createProfile","fullname","email","newpassword","image","data","URLSearchParams","res","catch","error","status","resetPassword","confirmEmail","message","forgotPass","checkConfirm","confirmation","deleteProfile","user","removeFile","filename","then","console","log","removeUserFile","filepath","COOKIES","logintoken","Logout","remove","localStorage","removeItem","push","loginRequest","password","token","value","setItem","exp","sub","set","getProfile","getStaticImages","getUserImages","getStoreItems","store","getStoreItemsByUser","owner","getStorePosts","getStorePost","postid","getStoreItem","itemid","likeItem","dislikeItem","getItemComments","makeComment","commentstring","connectingitem","rating","getStoreAuth","makeNewAuth","storename","storeurl","username","addStoreItem","itemname","itemdescription","itemprice","itemimage","itemstore","itemowner","id","addToCart","item","additem","getShoppingSession","getCartItems","cartdata","clearCart","getpaymentintent","client_secret"],"mappings":"AAAA,SAASA,eAAT,QAAgC,SAAhC;AACA,SAASC,IAAT,EAAeC,GAAf,EAAqBC,QAArB,QAAoC,eAApC;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAASC,OAAT,QAAwB,cAAxB;AAEA,MAAMC,OAAO,GAAG,IAAID,OAAJ,EAAhB;AAEA,OAAO,MAAME,aAAa,GAAG,gDAAtB;AAEP,OAAO,eAAeC,aAAf,CAA6BC,QAA7B,EAAuCC,KAAvC,EAA8CC,WAA9C,EAA2DC,KAA3D,EAAkE;AACrE;AACA,QAAMC,IAAI,GAAG,IAAIC,eAAJ,CAAoB;AAC7BL,IAAAA,QAD6B;AAE7BC,IAAAA,KAF6B;AAG7BC,IAAAA,WAH6B;AAI7BC,IAAAA;AAJ6B,GAApB,CAAb;AAMA,QAAMG,GAAG,GAAG,MAAMd,IAAI,CAAC,gBAAD,EAAmBY,IAAnB,CAAJ,CAA6BG,KAA7B,CAAmChB,eAAnC,CAAlB;AACA,MAAGe,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,MAAG,CAACF,GAAG,CAACF,IAAR,EAAc,OAAO,iBAAP;AAEd,SAAOE,GAAG,CAACF,IAAJ,CAASK,MAAhB;AACH;AAED,OAAO,eAAeC,aAAf,CAA6BT,KAA7B,EAAoCC,WAApC,EAAiD;AACpD,QAAME,IAAI,GAAG,IAAIC,eAAJ,CAAoB;AAC7BJ,IAAAA,KAD6B;AAE7BC,IAAAA;AAF6B,GAApB,CAAb;AAIA,QAAMI,GAAG,GAAG,MAAMd,IAAI,CAAC,YAAD,EAAeY,IAAf,CAAJ,CAAyBG,KAAzB,CAA+BhB,eAA/B,CAAlB;AACA,MAAGe,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,SAAOF,GAAG,CAACF,IAAJ,CAASK,MAAhB;AACH;AAED,OAAO,eAAeE,YAAf,CAA4BX,QAA5B,EAAsCC,KAAtC,EAA6C;AAChD,QAAMG,IAAI,GAAG,IAAIC,eAAJ,CAAoB;AAC7BL,IAAAA,QAD6B;AAE7BC,IAAAA;AAF6B,GAApB,CAAb;AAIA,QAAMK,GAAG,GAAG,MAAMd,IAAI,CAAC,iBAAD,EAAoBY,IAApB,CAAJ,CAA8BG,KAA9B,CAAoChB,eAApC,CAAlB;AACA,MAAGe,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,SAAOF,GAAG,CAACF,IAAJ,CAASQ,OAAhB;AACH;AAED,OAAO,eAAeC,UAAf,CAA0BZ,KAA1B,EAAiC;AACpC,QAAMG,IAAI,GAAG,IAAIC,eAAJ,CAAoB;AAC7BJ,IAAAA;AAD6B,GAApB,CAAb;AAGA,QAAMK,GAAG,GAAG,MAAMd,IAAI,CAAC,aAAD,EAAgBY,IAAhB,CAAJ,CAA0BG,KAA1B,CAAgChB,eAAhC,CAAlB;AACA,MAAGe,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,SAAOF,GAAG,CAACF,IAAJ,CAASQ,OAAhB;AACH;AAED,OAAO,eAAeE,YAAf,CAA4Bb,KAA5B,EAAmCc,YAAnC,EAAiD;AACpD,QAAMX,IAAI,GAAG,IAAIC,eAAJ,CAAoB;AAC7BJ,IAAAA,KAD6B;AAE7Bc,IAAAA;AAF6B,GAApB,CAAb;AAIA,QAAMT,GAAG,GAAG,MAAMd,IAAI,CAAC,eAAD,EAAkBY,IAAlB,CAAJ,CAA4BG,KAA5B,CAAkChB,eAAlC,CAAlB;AACA,MAAGe,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,MAAGF,GAAG,CAACF,IAAP,EAAa,OAAOE,GAAG,CAACF,IAAJ,CAASK,MAAhB;AAChB;AAED,OAAO,eAAeO,aAAf,CAA6BC,IAA7B,EAAmC;AACtC,QAAMX,GAAG,GAAG,MAAMb,GAAG,CAAE,eAAcwB,IAAK,EAArB,CAArB;AACA,MAAGX,GAAG,CAACF,IAAP,EAAa,OAAOE,GAAG,CAACF,IAAX;AACb,MAAGE,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,SAAOF,GAAG,CAACF,IAAX;AACH;AAED,OAAO,eAAec,UAAf,CAA0BC,QAA1B,EAAoC;AACvC,QAAMb,GAAG,GAAG,MAAMb,GAAG,CAAE,eAAc0B,QAAS,EAAzB,CAAH,CAA+BC,IAA/B,CACdd,GAAG,IAAI;AACH,QAAGA,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACda,IAAAA,OAAO,CAACC,GAAR,CAAYhB,GAAG,CAACF,IAAJ,CAASK,MAArB;AACA,WAAOH,GAAG,CAACF,IAAJ,CAASK,MAAhB;AACH,GALa,CAAlB;AAOH;AAED,OAAO,eAAec,cAAf,CAA8BC,QAA9B,EAAwCP,IAAxC,EAA8C;AACjD,QAAMb,IAAI,GAAG,IAAIC,eAAJ,CAAoB;AAC7BmB,IAAAA,QAD6B;AAE7BP,IAAAA;AAF6B,GAApB,CAAb;AAIA,QAAMX,GAAG,GAAG,MAAMd,IAAI,CAAC,aAAD,EAAgBY,IAAhB,CAAJ,CAA0BG,KAA1B,CAAgChB,eAAhC,CAAlB;AACA,MAAGe,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,SAAOF,GAAG,CAACF,IAAJ,CAASK,MAAhB;AACH;AAED,OAAO,MAAMgB,OAAO,GAAG;AACnBC,EAAAA,UAAU,EAAE;AADO,CAAhB;AAIP,OAAO,eAAeC,MAAf,GAAwB;AAC3B9B,EAAAA,OAAO,CAAC+B,MAAR,CAAe,OAAf;AAEAC,EAAAA,YAAY,CAACC,UAAb,CAAwB,MAAxB;AACAD,EAAAA,YAAY,CAACC,UAAb,CAAwB,cAAxB;AACAD,EAAAA,YAAY,CAACC,UAAb,CAAwB,eAAxB;AACAD,EAAAA,YAAY,CAACC,UAAb,CAAwB,YAAxB;AACAD,EAAAA,YAAY,CAACC,UAAb,CAAwB,KAAxB;AACAT,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACA,QAAM3B,MAAM,CAACoC,IAAP,CAAY,SAAZ,CAAN;AACH;AAED,OAAO,eAAeC,YAAf,CAA4B/B,KAA5B,EAAmCgC,QAAnC,EAA6C;AAChD;AACA,QAAM7B,IAAI,GAAG,IAAIC,eAAJ,CAAoB;AAC7BJ,IAAAA,KAD6B;AAE7BgC,IAAAA;AAF6B,GAApB,CAAb;AAIA,QAAM3B,GAAG,GAAG,MAAMd,IAAI,CAAC,QAAD,EAAWY,IAAX,CAAJ,CAAqBG,KAArB,CAA2BhB,eAA3B,CAAlB;AACA,MAAGe,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;;AACd,MAAGF,GAAG,CAACF,IAAJ,CAASI,KAAZ,EAAmB;AACf,WAAOF,GAAG,CAACF,IAAJ,CAASI,KAAhB;AACH;;AACD,QAAM;AAAE0B,IAAAA;AAAF,MAAY5B,GAAG,CAACF,IAAJ,CAAS+B,KAA3B;AACAN,EAAAA,YAAY,CAACO,OAAb,CAAqB,MAArB,EAA6B9B,GAAG,CAACF,IAAJ,CAASH,KAAtC;AACA4B,EAAAA,YAAY,CAACO,OAAb,CAAqB,cAArB,EAAqC9B,GAAG,CAACF,IAAJ,CAASJ,QAA9C;AACA6B,EAAAA,YAAY,CAACO,OAAb,CAAqB,eAArB,EAAsC9B,GAAG,CAACF,IAAJ,CAAS+B,KAA/C;AACAN,EAAAA,YAAY,CAACO,OAAb,CAAqB,YAArB,EAAmC9B,GAAG,CAACF,IAAJ,CAASiC,GAA5C;AACAR,EAAAA,YAAY,CAACO,OAAb,CAAqB,KAArB,EAA4B9B,GAAG,CAACF,IAAJ,CAASkC,GAArC;AACAzC,EAAAA,OAAO,CAAC0C,GAAR,CAAY,OAAZ,EAAqBjC,GAAG,CAACF,IAAJ,CAAS+B,KAA9B;AACAxC,EAAAA,MAAM,CAACoC,IAAP,CAAY,QAAZ;AACH;AAED,OAAO,eAAeS,UAAf,CAA0BvB,IAA1B,EAAgC;AACnC,QAAMX,GAAG,GAAG,MAAMb,GAAG,CAAE,eAAcwB,IAAK,EAArB,CAArB;AACA,MAAGX,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,SAAOF,GAAG,CAACF,IAAX;AACH;AAED,OAAO,eAAeqC,eAAf,GAAiC;AACpC,QAAMnC,GAAG,GAAG,MAAMb,GAAG,CAAC,iBAAD,CAArB;AACA,SAAOa,GAAG,CAACF,IAAX;AACH;AAED,OAAO,eAAesC,aAAf,CAA6BzB,IAA7B,EAAmC;AACtC,QAAMX,GAAG,GAAG,MAAMb,GAAG,CAAE,mBAAkBwB,IAAK,EAAzB,CAArB;AACA,SAAOX,GAAG,CAACF,IAAX;AACH,C,CAED;;AACA,OAAO,eAAeuC,aAAf,CAA6BC,KAA7B,EAAoC;AACvC,QAAMtC,GAAG,GAAG,MAAMb,GAAG,CAAE,kBAAiBmD,KAAM,EAAzB,CAArB;AACA,MAAGtC,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,MAAG,CAACF,GAAG,CAACF,IAAR,EAAc,OAAO,iCAAP;AACd,SAAOE,GAAG,CAACF,IAAX;AACH;AAED,OAAO,eAAeyC,mBAAf,CAAmCC,KAAnC,EAA0C;AAC7C,QAAMxC,GAAG,GAAG,MAAMb,GAAG,CAAE,wBAAuBqD,KAAM,EAA/B,CAArB;AACA,MAAGxC,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,MAAG,CAACF,GAAG,CAACF,IAAR,EAAc,OAAO,iCAAP;AACd,SAAOE,GAAG,CAACF,IAAX;AACH;AAED,OAAO,eAAe2C,aAAf,CAA6BH,KAA7B,EAAoC;AACvC,QAAMtC,GAAG,GAAG,MAAMb,GAAG,CAAE,kBAAiBmD,KAAM,EAAzB,CAArB;AACA,MAAGtC,GAAG,CAACE,KAAP,EAAc,OAAO,YAAP;AACd,MAAG,CAACF,GAAG,CAACF,IAAR,EAAc,OAAO,iCAAP;AACdiB,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA,SAAOhB,GAAG,CAACF,IAAX;AACH;AAED,OAAO,eAAe4C,YAAf,CAA4BC,MAA5B,EAAoC;AACvC,QAAM3C,GAAG,GAAG,MAAMb,GAAG,CAAE,iBAAgBwD,MAAO,EAAzB,CAArB;AACA,MAAG3C,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,MAAG,CAACF,GAAG,CAACF,IAAR,EAAc,OAAO,uBAAP;AACd,SAAOE,GAAG,CAACF,IAAX;AACH;AAED,OAAO,eAAe8C,YAAf,CAA4BC,MAA5B,EAAoC;AACvC,QAAM7C,GAAG,GAAG,MAAMb,GAAG,CAAE,iBAAgB0D,MAAO,EAAzB,CAArB;AACA,MAAG7C,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,MAAG,CAACF,GAAG,CAACF,IAAR,EAAc,OAAO,uBAAP;AACd,SAAOE,GAAG,CAACF,IAAX;AACH;AAED,OAAO,eAAegD,QAAf,CAAwBD,MAAxB,EAAgC;AACnC,QAAM7C,GAAG,GAAG,MAAMb,GAAG,CAAE,aAAY0D,MAAO,EAArB,CAArB;AACA,MAAG7C,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,SAAOF,GAAG,CAACF,IAAJ,CAASK,MAAhB;AACH;AAED,OAAO,eAAe4C,WAAf,CAA2BF,MAA3B,EAAmC;AACtC,QAAM7C,GAAG,GAAG,MAAMb,GAAG,CAAE,gBAAe0D,MAAO,EAAxB,CAArB;AACA,MAAG7C,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,SAAOF,GAAG,CAACF,IAAJ,CAASK,MAAhB;AACH;AAED,OAAO,eAAe6C,eAAf,CAA+BH,MAA/B,EAAuC;AAC1C,QAAM7C,GAAG,GAAG,MAAMb,GAAG,CAAE,gBAAe0D,MAAO,EAAxB,CAArB;AACA,MAAG7C,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,SAAOF,GAAG,CAACF,IAAX;AACH;AAED,OAAO,eAAemD,WAAf,CAA2BT,KAA3B,EAAkCU,aAAlC,EAAiDC,cAAjD,EAAiEC,MAAjE,EAAyE;AAC5E,QAAMtD,IAAI,GAAG,IAAIC,eAAJ,CAAoB;AAC7ByC,IAAAA,KAD6B;AAE7BU,IAAAA,aAF6B;AAG7BC,IAAAA,cAH6B;AAI7BC,IAAAA;AAJ6B,GAApB,CAAb;AAMA,QAAMpD,GAAG,GAAG,MAAMd,IAAI,CAAC,cAAD,EAAiBY,IAAjB,CAAJ,CAA2BG,KAA3B,CAAiChB,eAAjC,CAAlB;AACA,MAAGe,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,MAAGF,GAAG,CAACF,IAAP,EAAa,OAAOE,GAAG,CAACF,IAAJ,CAASK,MAAhB;AAChB;AAED,OAAO,eAAekD,YAAf,CAA4B1C,IAA5B,EAAkC;AACrC,QAAMX,GAAG,GAAG,MAAMb,GAAG,CAAE,iBAAgBwB,IAAK,EAAvB,CAArB;AACA,MAAGX,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,MAAGF,GAAG,CAACF,IAAJ,CAASK,MAAZ,EAAoB,OAAO,UAAP;AACpB,SAAOH,GAAG,CAACF,IAAX;AACH;AAED,OAAO,eAAewD,WAAf,CAA2BC,SAA3B,EAAsCC,QAAtC,EAAgDC,QAAhD,EAA0D;AAC7D,QAAM3D,IAAI,GAAG,IAAIC,eAAJ,CAAoB;AAC7B0D,IAAAA,QAD6B;AAE7BF,IAAAA,SAF6B;AAG7BC,IAAAA;AAH6B,GAApB,CAAb;AAKA,QAAMxD,GAAG,GAAG,MAAMd,IAAI,CAAC,gBAAD,EAAmBY,IAAnB,CAAJ,CAA6BG,KAA7B,CAAmChB,eAAnC,CAAlB;AACA,MAAGe,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,MAAG,CAACF,GAAG,CAACF,IAAJ,CAASK,MAAb,EAAqB;AACrB,SAAOH,GAAG,CAACF,IAAJ,CAASK,MAAhB;AACH;AAED,OAAO,eAAeuD,YAAf,CAA4BC,QAA5B,EAAsCC,eAAtC,EAAuDC,SAAvD,EAAkEC,SAAlE,EAA6EC,SAA7E,EAAwFC,SAAxF,EAAmG;AACtG,QAAMlE,IAAI,GAAG,IAAIC,eAAJ,CAAoB;AAC7B4D,IAAAA,QAD6B;AAE7BC,IAAAA,eAF6B;AAG7BC,IAAAA,SAH6B;AAI7BC,IAAAA,SAJ6B;AAK7BC,IAAAA,SAL6B;AAM7BC,IAAAA;AAN6B,GAApB,CAAb;AAQA,QAAMhE,GAAG,GAAG,MAAMd,IAAI,CAAC,kBAAD,EAAqBY,IAArB,CAAJ,CAA+BG,KAA/B,CAAqChB,eAArC,CAAlB;AACA,MAAGe,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,MAAG,CAACF,GAAG,CAACF,IAAJ,CAASK,MAAb,EAAqB;AACrB,SAAOH,GAAG,CAACF,IAAJ,CAAS+C,MAAhB;AACH;AAED,OAAO,eAAerB,UAAf,CAA0ByC,EAA1B,EAA8B;AACjC,QAAMjE,GAAG,GAAG,MAAMb,GAAG,CAAE,eAAc8E,EAAG,EAAnB,CAArB;AACA,MAAGjE,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,SAAOF,GAAG,CAACF,IAAJ,CAASK,MAAhB;AACH,C,CAED;AACA;AACA;AACA;AACA;;AAEA,OAAO,eAAe+D,SAAf,CAAyBvE,KAAzB,EAAgCwE,IAAhC,EAAsC;AACzC,QAAMrE,IAAI,GAAG,IAAIC,eAAJ,CAAoB;AAC7BJ,IAAAA,KAD6B;AACtBwE,IAAAA;AADsB,GAApB,CAAb;AAGA,QAAMC,OAAO,GAAG,MAAMlF,IAAI,CAAC,YAAD,EAAeY,IAAf,CAAJ,CAAyBG,KAAzB,CAA+BhB,eAA/B,CAAtB;AACA,MAAGmF,OAAH,EAAY,OAAOA,OAAO,CAACtE,IAAR,CAAaK,MAApB;AACf;AAED,OAAO,eAAekE,kBAAf,CAAkC1E,KAAlC,EAAyC;AAC5C,QAAMK,GAAG,GAAG,MAAMb,GAAG,CAAE,uBAAsBQ,KAAM,EAA9B,CAArB;AACA,MAAGK,GAAH,EAAQ,OAAOA,GAAG,CAACF,IAAX;AACX;AAED,OAAO,eAAewE,YAAf,CAA4BC,QAA5B,EAAsC;AACzC,QAAMvE,GAAG,GAAG,MAAMb,GAAG,CAAE,iBAAgBoF,QAAS,EAA3B,CAArB;AACA,MAAGvE,GAAH,EAAQ,OAAOA,GAAG,CAACF,IAAX;AACX;AAED,OAAO,eAAe0E,SAAf,CAAyB7E,KAAzB,EAAgC;AACnC4B,EAAAA,YAAY,CAACC,UAAb,CAAwB,aAAxB;AACA,QAAMxB,GAAG,GAAG,MAAMb,GAAG,CAAE,cAAaQ,KAAM,EAArB,CAArB;AACA,MAAGK,GAAH,EAAQ,OAAOA,GAAG,CAACF,IAAJ,CAASK,MAAhB;AACX;AAED,OAAO,eAAesE,gBAAf,CAAgC9E,KAAhC,EAAuC4E,QAAvC,EAAiD;AACpD,QAAMzE,IAAI,GAAG,IAAIC,eAAJ,CAAoB;AAC7BJ,IAAAA,KAD6B;AAE7B4E,IAAAA;AAF6B,GAApB,CAAb;AAIA,QAAMvE,GAAG,GAAG,MAAMd,IAAI,CAAC,gBAAD,EAAmBY,IAAnB,CAAJ,CAA6BG,KAA7B,CAAmChB,eAAnC,CAAlB;AACA,MAAGe,GAAG,CAACE,KAAP,EAAc,OAAOF,GAAG,CAACE,KAAX;AACd,MAAG,CAACF,GAAG,CAACF,IAAR,EAAc,OAAO,iCAAP;AACd,SAAOE,GAAG,CAACF,IAAJ,CAAS4E,aAAhB;AACH","sourcesContent":["import { catchAxiosError } from \"./error\";\nimport { post, get , postFile} from \"./restservice\";\nimport Router from 'next/router';\nimport { Cookies } from 'react-cookie';\n\nconst cookies = new Cookies();\n\nexport const backendImages = \"https://zerorevision.com/restapi/uploadimages/\";\n\nexport async function createProfile(fullname, email, newpassword, image) {\n    // Request data to post to createprofile route on rest api\n    const data = new URLSearchParams({\n        fullname,\n        email,\n        newpassword,\n        image,\n    });\n    const res = await post(\"/createprofile\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    if(!res.data) return \"Something wrong\";\n\n    return res.data.status;\n}\n\nexport async function resetPassword(email, newpassword) {\n    const data = new URLSearchParams({\n        email,\n        newpassword\n    })\n    const res = await post(\"/resetpass\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    return res.data.status;\n}\n\nexport async function confirmEmail(fullname, email) {\n    const data = new URLSearchParams({\n        fullname,\n        email\n    })\n    const res = await post(\"/confirmemailzr\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    return res.data.message;\n}\n\nexport async function forgotPass(email) {\n    const data = new URLSearchParams({\n        email,\n    })\n    const res = await post(\"/forgotpass\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    return res.data.message;\n}\n\nexport async function checkConfirm(email, confirmation) {\n    const data = new URLSearchParams({\n        email,\n        confirmation\n    })\n    const res = await post(\"/checkconfirm\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    if(res.data) return res.data.status;\n}\n\nexport async function deleteProfile(user) {\n    const res = await get(`/removeuser/${user}`);\n    if(res.data) return res.data;\n    if(res.error) return res.error;\n    return res.data;\n}\n\nexport async function removeFile(filename) {\n    const res = await get(`/removefile/${filename}`).then(\n        res => {\n            if(res.error) return res.error;\n            console.log(res.data.status);\n            return res.data.status;\n        }\n    )\n}\n\nexport async function removeUserFile(filepath, user) {\n    const data = new URLSearchParams({\n        filepath, \n        user,\n    });\n    const res = await post(\"/removefile\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    return res.data.status;\n}\n\nexport const COOKIES = {\n    logintoken: \"indexplus.token.secured\"\n};\n\nexport async function Logout() {\n    cookies.remove('token');\n    \n    localStorage.removeItem('user');\n    localStorage.removeItem('userFullName');\n    localStorage.removeItem('authorization');\n    localStorage.removeItem('expiration');\n    localStorage.removeItem('sub');\n    console.log(\"User logged out\")\n    await Router.push(\"/logout\");\n}\n\nexport async function loginRequest(email, password) {\n    // New Login Data request\n    const data = new URLSearchParams({\n        email, \n        password,\n    });\n    const res = await post(\"/login\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    if(res.data.error) {\n        return res.data.error;\n    }\n    const { token } = res.data.value;\n    localStorage.setItem('user', res.data.email);\n    localStorage.setItem('userFullName', res.data.fullname);\n    localStorage.setItem('authorization', res.data.value);\n    localStorage.setItem('expiration', res.data.exp);\n    localStorage.setItem('sub', res.data.sub);\n    cookies.set('token', res.data.value);\n    Router.push(\"/login\");\n}\n\nexport async function getProfile(user) {\n    const res = await get(`/getprofile/${user}`);\n    if(res.error) return res.error;\n    return res.data;\n}\n\nexport async function getStaticImages() {\n    const res = await get(\"/uploadedimages\");\n    return res.data;\n}\n\nexport async function getUserImages(user) {\n    const res = await get(`/uploadedimages/${user}`);\n    return res.data;\n}\n\n// Store Item and Post Upload Endpoints //\nexport async function getStoreItems(store) {\n    const res = await get(`/getstoreitems/${store}`);\n    if(res.error) return res.error;\n    if(!res.data) return \"Did not load or no items yet...\";\n    return res.data;\n}\n\nexport async function getStoreItemsByUser(owner) {\n    const res = await get(`/getstoreitemsbyuser/${owner}`);\n    if(res.error) return res.error;\n    if(!res.data) return \"Did not load or no items yet...\";\n    return res.data;\n}\n\nexport async function getStorePosts(store) {\n    const res = await get(`/getstoreposts/${store}`);\n    if(res.error) return \"noresponse\";\n    if(!res.data) return \"Did not load or no posts yet...\";\n    console.log(\"called get posts\");\n    return res.data;\n}\n\nexport async function getStorePost(postid) {\n    const res = await get(`/getstorepost/${postid}`);\n    if(res.error) return res.error;\n    if(!res.data) return \"Did not load the post\";\n    return res.data;\n}\n\nexport async function getStoreItem(itemid) {\n    const res = await get(`/getstoreitem/${itemid}`);\n    if(res.error) return res.error;\n    if(!res.data) return \"Did not load the item\";\n    return res.data;\n}\n\nexport async function likeItem(itemid) {\n    const res = await get(`/likeitem/${itemid}`);\n    if(res.error) return res.error;\n    return res.data.status;\n}\n\nexport async function dislikeItem(itemid) {\n    const res = await get(`/dislikeitem/${itemid}`);\n    if(res.error) return res.error;\n    return res.data.status;\n}\n\nexport async function getItemComments(itemid) {\n    const res = await get(`/getcomments/${itemid}`);\n    if(res.error) return res.error;\n    return res.data;\n}\n\nexport async function makeComment(owner, commentstring, connectingitem, rating) {\n    const data = new URLSearchParams({\n        owner,\n        commentstring,\n        connectingitem,\n        rating\n    })\n    const res = await post(\"/makecomment\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    if(res.data) return res.data.status;\n}\n\nexport async function getStoreAuth(user) {\n    const res = await get(`/getstoreauth/${user}`);\n    if(res.error) return res.error;\n    if(res.data.status) return \"No Store\";\n    return res.data;\n}\n\nexport async function makeNewAuth(storename, storeurl, username) {\n    const data = new URLSearchParams({\n        username,\n        storename,\n        storeurl\n    });\n    const res = await post(\"/makestoreauth\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    if(!res.data.status) \"Did not work\";\n    return res.data.status;\n}\n\nexport async function addStoreItem(itemname, itemdescription, itemprice, itemimage, itemstore, itemowner) {\n    const data = new URLSearchParams({\n        itemname, \n        itemdescription, \n        itemprice, \n        itemimage, \n        itemstore,\n        itemowner\n    });\n    const res = await post(\"/createstoreitem\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    if(!res.data.status) \"No Response\";\n    return res.data.itemid;\n}\n\nexport async function removeItem(id) {\n    const res = await get(`/deleteitem/${id}`);\n    if(res.error) return res.error;\n    return res.data.status;\n}\n\n// Shopping Card Session fetching and creating //\n// >> ADD TO CART\n// >> REMOVE FROM CART\n// >> GET SHOPPING SESSION (AUTO CREATES SESSION IF NOT EXISTS)\n// >> \n\nexport async function addToCart(email, item) {\n    const data = new URLSearchParams({\n        email, item\n    })\n    const additem = await post('/addtocart', data).catch(catchAxiosError);\n    if(additem) return additem.data.status;\n}\n\nexport async function getShoppingSession(email) {\n    const res = await get(`/getshoppingsession/${email}`);\n    if(res) return res.data;\n}\n\nexport async function getCartItems(cartdata) {\n    const res = await get(`/getcartitems/${cartdata}`);\n    if(res) return res.data;\n}\n\nexport async function clearCart(email) {\n    localStorage.removeItem('cartsession');\n    const res = await get(`/clearcart/${email}`);\n    if(res) return res.data.status;\n}\n\nexport async function getpaymentintent(email, cartdata) {\n    const data = new URLSearchParams({\n        email,\n        cartdata,\n    });\n    const res = await post(\"/paymentIntent\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    if(!res.data) return \"Did not load or no items yet...\";\n    return res.data.client_secret;\n}"]},"metadata":{},"sourceType":"module"}