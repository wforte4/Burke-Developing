{"ast":null,"code":"import { catchAxiosError } from \"./error\";\nimport { post, get, postFile } from \"./restservice\";\nimport Router from 'next/router';\nimport { Cookies } from 'react-cookie';\nimport nextCookies from 'next-cookies';\nimport jwt_decode from 'jwt-decode';\nconst cookies = new Cookies();\nexport const backendImages = \"https://uplink.work/restapi/uploadimages/\";\nexport async function createProfile(firstname, lastname, email, password) {\n  // Request data to post to createprofile route on rest api\n  fetch('http://localhost:3600/users', {\n    method: 'POST',\n    headers: {\n      \"Content-type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      \"firstName\": firstname,\n      \"lastName\": lastname,\n      \"email\": email,\n      \"password\": password\n    })\n  }).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    console.log('Request succeeded with JSON response', data);\n  }).catch(function (error) {\n    console.log('Request failed', error);\n  });\n}\nexport async function loginRequest(email, password) {\n  // New Login Data request\n  const newLogin = await fetch('http://localhost:3600/auth', {\n    method: 'POST',\n    headers: {\n      \"Content-type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      \"email\": email,\n      \"password\": password\n    })\n  }).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    cookies.set('accessToken', data.accessToken);\n    cookies.set('refreshToken', data.refreshToken);\n    const decoded = jwt_decode(data.accessToken);\n    cookies.set('name', decoded.name);\n    cookies.set('email', decoded.email);\n    cookies.set('refreshKey', decoded.refreshKey);\n    cookies.set('permission_level', decoded.permissionLevel);\n    cookies.set('userId', decoded.userId);\n    Router.push(\"/\");\n  }).catch(function (error) {\n    return error;\n  });\n\n  if (newLogin) {\n    return \"Username/Password does not match our records!\";\n  }\n}\nexport async function Logout() {\n  cookies.remove('accessToken');\n  cookies.remove('refreshToken');\n  cookies.remove('name');\n  cookies.remove('email');\n  cookies.remove('refreshKey');\n  cookies.remove('userId');\n  await Router.push(\"/login\");\n}\nexport async function createTask(objective, status) {\n  const getCookies = cookies.getAll(); // New Login Data request\n\n  const newTask = await fetch('http://localhost:3600/tasks', {\n    method: 'POST',\n    headers: {\n      \"Content-type\": \"application/json\",\n      \"Authorization\": `Bearer ${getCookies.accessToken}`\n    },\n    body: JSON.stringify({\n      \"objective\": objective,\n      \"status\": status\n    })\n  }).then(function (response) {\n    return response.json();\n  }).catch(function (error) {\n    return error;\n  });\n\n  if (newTask) {\n    return newTask;\n  }\n}\nexport async function getTasks(limit, token) {\n  const getCookies = cookies.getAll(); // New Login Data request\n\n  const newTask = await fetch('http://localhost:3600/tasks', {\n    method: 'GET',\n    headers: {\n      \"Content-type\": \"application/json\",\n      \"Authorization\": `Bearer ${getCookies.accessToken ? getCookies.accessToken : token}`\n    },\n    query: JSON.stringify({\n      \"limit\": limit\n    })\n  }).then(function (response) {\n    return response.json();\n  }).catch(function (error) {\n    return error;\n  });\n\n  if (newTask) {\n    return newTask;\n  }\n}\nexport async function removeTask(taskId) {\n  const getCookies = cookies.getAll(); // New Login Data request\n\n  const newTask = await fetch(`http://localhost:3600/tasks/:${taskId}`, {\n    method: 'DELETE',\n    headers: {\n      \"Authorization\": `Bearer ${getCookies.accessToken ? getCookies.accessToken : token}`\n    }\n  }).then(function (response) {\n    return response.json();\n  }).catch(function (error) {\n    return error;\n  });\n\n  if (newTask) {\n    return newTask;\n  }\n}\nexport async function forgotPass(email) {\n  const data = new URLSearchParams({\n    email\n  });\n  const res = await post(\"/forgotpass\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  return res.data.message;\n}\nexport async function checkConfirm(email, confirmation) {\n  const data = new URLSearchParams({\n    email,\n    confirmation\n  });\n  const res = await post(\"/checkconfirm\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  if (res.data) return res.data.status;\n}\nexport async function deleteProfile(user) {\n  const res = await get(`/removeuser/${user}`);\n  if (res.data) return res.data;\n  if (res.error) return res.error;\n  return res.data;\n}\nexport async function removeFile(filename) {\n  const res = await get(`/removefile/${filename}`).then(res => {\n    if (res.error) return res.error;\n    console.log(res.data.status);\n    return res.data.status;\n  });\n}\nexport async function removeUserFile(filepath, user) {\n  const data = new URLSearchParams({\n    filepath,\n    user\n  });\n  const res = await post(\"/removefile\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  return res.data.status;\n}\nexport const COOKIES = {\n  logintoken: \"indexplus.token.secured\"\n};\nexport async function getProfile(user) {\n  const res = await get(`/getprofile/${user}`);\n  if (res.error) return res.error;\n  return res.data;\n}\nexport async function getStaticImages() {\n  const res = await get(\"/uploadedimages\");\n  return res.data;\n}\nexport async function getUserImages(user) {\n  const res = await get(`/uploadedimages/${user}`);\n  return res.data;\n} // Store Item and Post Upload Endpoints //\n\nexport async function getStoreItems(store) {\n  const res = await get(`/getstoreitems/${store}`);\n  if (res.error) return res.error;\n  if (!res.data) return \"Did not load or no items yet...\";\n  return res.data;\n}\nexport async function getStoreItemsByUser(owner) {\n  const res = await get(`/getstoreitemsbyuser/${owner}`);\n  if (res.error) return res.error;\n  if (!res.data) return \"Did not load or no items yet...\";\n  return res.data;\n}\nexport async function getStorePosts(store) {\n  const res = await get(`/getstoreposts/${store}`);\n  if (res.error) return \"noresponse\";\n  if (!res.data) return \"Did not load or no posts yet...\";\n  console.log(\"called get posts\");\n  return res.data;\n}\nexport async function getStorePost(postid) {\n  const res = await get(`/getstorepost/${postid}`);\n  if (res.error) return res.error;\n  if (!res.data) return \"Did not load the post\";\n  return res.data;\n}\nexport async function getStoreItem(itemid) {\n  const res = await get(`/getstoreitem/${itemid}`);\n  if (res.error) return res.error;\n  if (!res.data) return \"Did not load the item\";\n  return res.data;\n}\nexport async function likeItem(itemid) {\n  const res = await get(`/likeitem/${itemid}`);\n  if (res.error) return res.error;\n  return res.data.status;\n}\nexport async function dislikeItem(itemid) {\n  const res = await get(`/dislikeitem/${itemid}`);\n  if (res.error) return res.error;\n  return res.data.status;\n}\nexport async function getItemComments(itemid) {\n  const res = await get(`/getcomments/${itemid}`);\n  if (res.error) return res.error;\n  return res.data;\n}\nexport async function makeComment(owner, commentstring, connectingitem, rating) {\n  const data = new URLSearchParams({\n    owner,\n    commentstring,\n    connectingitem,\n    rating\n  });\n  const res = await post(\"/makecomment\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  if (res.data) return res.data.status;\n}\nexport async function getStoreAuth(user) {\n  const res = await get(`/getstoreauth/${user}`);\n  if (res.error) return res.error;\n  if (res.data.status) return \"No Store\";\n  return res.data;\n}\nexport async function makeNewAuth(storename, storeurl, username) {\n  const data = new URLSearchParams({\n    username,\n    storename,\n    storeurl\n  });\n  const res = await post(\"/makestoreauth\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  if (!res.data.status) \"Did not work\";\n  return res.data.status;\n}\nexport async function addStoreItem(itemname, itemdescription, itemprice, itemimage, itemstore, itemowner) {\n  const data = new URLSearchParams({\n    itemname,\n    itemdescription,\n    itemprice,\n    itemimage,\n    itemstore,\n    itemowner\n  });\n  const res = await post(\"/createstoreitem\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  if (!res.data.status) \"No Response\";\n  return res.data.itemid;\n}\nexport async function removeItem(id) {\n  const res = await get(`/deleteitem/${id}`);\n  if (res.error) return res.error;\n  return res.data.status;\n} // Shopping Card Session fetching and creating //\n// >> ADD TO CART\n// >> REMOVE FROM CART\n// >> GET SHOPPING SESSION (AUTO CREATES SESSION IF NOT EXISTS)\n// >> \n\nexport async function addToCart(email, item) {\n  const data = new URLSearchParams({\n    email,\n    item\n  });\n  const additem = await post('/addtocart', data).catch(catchAxiosError);\n  if (additem) return additem.data.status;\n}\nexport async function getShoppingSession(email) {\n  const res = await get(`/getshoppingsession/${email}`);\n  if (res) return res.data;\n}\nexport async function getCartItems(cartdata) {\n  const res = await get(`/getcartitems/${cartdata}`);\n  if (res) return res.data;\n}\nexport async function clearCart(email) {\n  localStorage.removeItem('cartsession');\n  const res = await get(`/clearcart/${email}`);\n  if (res) return res.data.status;\n}\nexport async function getpaymentintent(email, cartdata) {\n  const data = new URLSearchParams({\n    email,\n    cartdata\n  });\n  const res = await post(\"/paymentIntent\", data).catch(catchAxiosError);\n  if (res.error) return res.error;\n  if (!res.data) return \"Did not load or no items yet...\";\n  return res.data.client_secret;\n}","map":{"version":3,"sources":["/Users/williamforte/Canvas/burkedeveloping/services/apiservice.js"],"names":["catchAxiosError","post","get","postFile","Router","Cookies","nextCookies","jwt_decode","cookies","backendImages","createProfile","firstname","lastname","email","password","fetch","method","headers","body","JSON","stringify","then","response","json","data","console","log","catch","error","loginRequest","newLogin","set","accessToken","refreshToken","decoded","name","refreshKey","permissionLevel","userId","push","Logout","remove","createTask","objective","status","getCookies","getAll","newTask","getTasks","limit","token","query","removeTask","taskId","forgotPass","URLSearchParams","res","message","checkConfirm","confirmation","deleteProfile","user","removeFile","filename","removeUserFile","filepath","COOKIES","logintoken","getProfile","getStaticImages","getUserImages","getStoreItems","store","getStoreItemsByUser","owner","getStorePosts","getStorePost","postid","getStoreItem","itemid","likeItem","dislikeItem","getItemComments","makeComment","commentstring","connectingitem","rating","getStoreAuth","makeNewAuth","storename","storeurl","username","addStoreItem","itemname","itemdescription","itemprice","itemimage","itemstore","itemowner","removeItem","id","addToCart","item","additem","getShoppingSession","getCartItems","cartdata","clearCart","localStorage","getpaymentintent","client_secret"],"mappings":"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","sourcesContent":["import { catchAxiosError } from \"./error\";\nimport { post, get , postFile} from \"./restservice\";\nimport Router from 'next/router';\nimport { Cookies } from 'react-cookie';\nimport nextCookies from 'next-cookies'\nimport jwt_decode from 'jwt-decode';\n\nconst cookies = new Cookies();\n\nexport const backendImages = \"https://uplink.work/restapi/uploadimages/\";\n\nexport async function createProfile(firstname, lastname, email, password) {\n    // Request data to post to createprofile route on rest api\n    fetch('http://localhost:3600/users', {\n        method: 'POST',\n        headers: {\n            \"Content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            \"firstName\": firstname,\n            \"lastName\": lastname,\n            \"email\": email,\n            \"password\": password\n        })\n    })\n    .then(function(response) {\n        return response.json();\n    })\n    .then(function(data) {\n        console.log('Request succeeded with JSON response', data);\n    })\n    .catch(function(error) {\n        console.log('Request failed', error);\n    });\n}\n\nexport async function loginRequest(email, password) {\n    // New Login Data request\n    const newLogin = await fetch('http://localhost:3600/auth', {\n        method: 'POST',\n        headers: {\n            \"Content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            \"email\": email,\n            \"password\": password\n        })\n    })\n    .then(function(response) {\n        return response.json();\n    })\n    .then(function(data) {\n        cookies.set('accessToken', data.accessToken);\n        cookies.set('refreshToken', data.refreshToken);\n        const decoded = jwt_decode(data.accessToken);\n        cookies.set('name', decoded.name)\n        cookies.set('email', decoded.email)\n        cookies.set('refreshKey', decoded.refreshKey)\n        cookies.set('permission_level', decoded.permissionLevel)\n        cookies.set('userId', decoded.userId)\n        Router.push(\"/\")\n    })\n    .catch(function(error) {\n        return error\n    });\n    if(newLogin) {\n        return \"Username/Password does not match our records!\"\n    }\n}\n\nexport async function Logout() {\n    cookies.remove('accessToken');\n    cookies.remove('refreshToken');\n    cookies.remove('name')\n    cookies.remove('email')\n    cookies.remove('refreshKey')\n    cookies.remove('userId')\n    await Router.push(\"/login\");\n}\n\nexport async function createTask(objective, status) {\n    \n    const getCookies = cookies.getAll()\n    // New Login Data request\n    const newTask = await fetch('http://localhost:3600/tasks', {\n        method: 'POST',\n        headers: {\n            \"Content-type\": \"application/json\",\n            \"Authorization\": `Bearer ${getCookies.accessToken}`\n        },\n        body: JSON.stringify({\n            \"objective\": objective,\n            \"status\": status\n        })\n    })\n    .then(function(response) {\n        return response.json();\n    })\n    .catch(function(error) {\n        return error\n    });\n    if(newTask) {\n        return newTask\n    }\n}\n\nexport async function getTasks(limit, token) {\n    \n    const getCookies = cookies.getAll()\n    // New Login Data request\n    const newTask = await fetch('http://localhost:3600/tasks', {\n        method: 'GET',\n        headers: {\n            \"Content-type\": \"application/json\",\n            \"Authorization\": `Bearer ${getCookies.accessToken ? getCookies.accessToken: token}`\n        },\n        query: JSON.stringify({\n            \"limit\": limit\n        })\n    })\n    .then(function(response) {\n        return response.json();\n    })\n    .catch(function(error) {\n        return error\n    });\n    if(newTask) {\n        return newTask\n    }\n}\n\nexport async function removeTask(taskId) {\n    \n    const getCookies = cookies.getAll()\n    // New Login Data request\n    const newTask = await fetch(`http://localhost:3600/tasks/:${taskId}`, {\n        method: 'DELETE',\n        headers: {\n            \"Authorization\": `Bearer ${getCookies.accessToken ? getCookies.accessToken: token}`\n        }\n    })\n    .then(function(response) {\n        return response.json();\n    })\n    .catch(function(error) {\n        return error\n    });\n    if(newTask) {\n        return newTask\n    }\n}\n\nexport async function forgotPass(email) {\n    const data = new URLSearchParams({\n        email,\n    })\n    const res = await post(\"/forgotpass\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    return res.data.message;\n}\n\nexport async function checkConfirm(email, confirmation) {\n    const data = new URLSearchParams({\n        email,\n        confirmation\n    })\n    const res = await post(\"/checkconfirm\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    if(res.data) return res.data.status;\n}\n\nexport async function deleteProfile(user) {\n    const res = await get(`/removeuser/${user}`);\n    if(res.data) return res.data;\n    if(res.error) return res.error;\n    return res.data;\n}\n\nexport async function removeFile(filename) {\n    const res = await get(`/removefile/${filename}`).then(\n        res => {\n            if(res.error) return res.error;\n            console.log(res.data.status);\n            return res.data.status;\n        }\n    )\n}\n\nexport async function removeUserFile(filepath, user) {\n    const data = new URLSearchParams({\n        filepath, \n        user,\n    });\n    const res = await post(\"/removefile\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    return res.data.status;\n}\n\nexport const COOKIES = {\n    logintoken: \"indexplus.token.secured\"\n};\n\n\n\n\nexport async function getProfile(user) {\n    const res = await get(`/getprofile/${user}`);\n    if(res.error) return res.error;\n    return res.data;\n}\n\nexport async function getStaticImages() {\n    const res = await get(\"/uploadedimages\");\n    return res.data;\n}\n\nexport async function getUserImages(user) {\n    const res = await get(`/uploadedimages/${user}`);\n    return res.data;\n}\n\n// Store Item and Post Upload Endpoints //\nexport async function getStoreItems(store) {\n    const res = await get(`/getstoreitems/${store}`);\n    if(res.error) return res.error;\n    if(!res.data) return \"Did not load or no items yet...\";\n    return res.data;\n}\n\nexport async function getStoreItemsByUser(owner) {\n    const res = await get(`/getstoreitemsbyuser/${owner}`);\n    if(res.error) return res.error;\n    if(!res.data) return \"Did not load or no items yet...\";\n    return res.data;\n}\n\nexport async function getStorePosts(store) {\n    const res = await get(`/getstoreposts/${store}`);\n    if(res.error) return \"noresponse\";\n    if(!res.data) return \"Did not load or no posts yet...\";\n    console.log(\"called get posts\");\n    return res.data;\n}\n\nexport async function getStorePost(postid) {\n    const res = await get(`/getstorepost/${postid}`);\n    if(res.error) return res.error;\n    if(!res.data) return \"Did not load the post\";\n    return res.data;\n}\n\nexport async function getStoreItem(itemid) {\n    const res = await get(`/getstoreitem/${itemid}`);\n    if(res.error) return res.error;\n    if(!res.data) return \"Did not load the item\";\n    return res.data;\n}\n\nexport async function likeItem(itemid) {\n    const res = await get(`/likeitem/${itemid}`);\n    if(res.error) return res.error;\n    return res.data.status;\n}\n\nexport async function dislikeItem(itemid) {\n    const res = await get(`/dislikeitem/${itemid}`);\n    if(res.error) return res.error;\n    return res.data.status;\n}\n\nexport async function getItemComments(itemid) {\n    const res = await get(`/getcomments/${itemid}`);\n    if(res.error) return res.error;\n    return res.data;\n}\n\nexport async function makeComment(owner, commentstring, connectingitem, rating) {\n    const data = new URLSearchParams({\n        owner,\n        commentstring,\n        connectingitem,\n        rating\n    })\n    const res = await post(\"/makecomment\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    if(res.data) return res.data.status;\n}\n\nexport async function getStoreAuth(user) {\n    const res = await get(`/getstoreauth/${user}`);\n    if(res.error) return res.error;\n    if(res.data.status) return \"No Store\";\n    return res.data;\n}\n\nexport async function makeNewAuth(storename, storeurl, username) {\n    const data = new URLSearchParams({\n        username,\n        storename,\n        storeurl\n    });\n    const res = await post(\"/makestoreauth\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    if(!res.data.status) \"Did not work\";\n    return res.data.status;\n}\n\nexport async function addStoreItem(itemname, itemdescription, itemprice, itemimage, itemstore, itemowner) {\n    const data = new URLSearchParams({\n        itemname, \n        itemdescription, \n        itemprice, \n        itemimage, \n        itemstore,\n        itemowner\n    });\n    const res = await post(\"/createstoreitem\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    if(!res.data.status) \"No Response\";\n    return res.data.itemid;\n}\n\nexport async function removeItem(id) {\n    const res = await get(`/deleteitem/${id}`);\n    if(res.error) return res.error;\n    return res.data.status;\n}\n\n// Shopping Card Session fetching and creating //\n// >> ADD TO CART\n// >> REMOVE FROM CART\n// >> GET SHOPPING SESSION (AUTO CREATES SESSION IF NOT EXISTS)\n// >> \n\nexport async function addToCart(email, item) {\n    const data = new URLSearchParams({\n        email, item\n    })\n    const additem = await post('/addtocart', data).catch(catchAxiosError);\n    if(additem) return additem.data.status;\n}\n\nexport async function getShoppingSession(email) {\n    const res = await get(`/getshoppingsession/${email}`);\n    if(res) return res.data;\n}\n\nexport async function getCartItems(cartdata) {\n    const res = await get(`/getcartitems/${cartdata}`);\n    if(res) return res.data;\n}\n\nexport async function clearCart(email) {\n    localStorage.removeItem('cartsession');\n    const res = await get(`/clearcart/${email}`);\n    if(res) return res.data.status;\n}\n\nexport async function getpaymentintent(email, cartdata) {\n    const data = new URLSearchParams({\n        email,\n        cartdata,\n    });\n    const res = await post(\"/paymentIntent\", data).catch(catchAxiosError);\n    if(res.error) return res.error;\n    if(!res.data) return \"Did not load or no items yet...\";\n    return res.data.client_secret;\n}"]},"metadata":{},"sourceType":"module"}