{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/williamforte/Canvas/burkedeveloping/pages/backend_host_controller/imageupload.js\",\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useRef } from 'react';\nimport { baseConfig } from '../../services/restservice';\nimport Theme from '../../styles/theme';\n\nfunction UploadImage(_ref) {\n  _s();\n\n  var _this = this;\n\n  var firstLoadImages = _ref.firstLoadImages;\n\n  var _useState = useState(firstLoadImages),\n      images = _useState[0],\n      setImages = _useState[1];\n\n  var _useState2 = useState(null),\n      file = _useState2[0],\n      setFile = _useState2[1];\n\n  var _useState3 = useState(null),\n      preview = _useState3[0],\n      setPreview = _useState3[1];\n\n  var _useState4 = useState(null),\n      multipreview = _useState4[0],\n      setMultiPreview = _useState4[1];\n\n  var _useState5 = useState(false),\n      loadingImages = _useState5[0],\n      setLoadingImages = _useState5[1];\n\n  var formMulti = useRef(null);\n\n  var uploadImageSingle = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var formData, uploadImage;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n\n              if (!(file == null)) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 3:\n              formData = new FormData();\n              formData.append(\"myFile\", file);\n              _context.next = 7;\n              return fetch(baseConfig.baseURL + '/uploadfile', {\n                method: 'POST',\n                body: formData\n              }).then(function (response) {\n                return response.json();\n              });\n\n            case 7:\n              uploadImage = _context.sent;\n\n              if (uploadImage) {\n                setPreview(null);\n                setFile(null);\n                loadImages(e);\n              }\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function uploadImageSingle(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var uploadImageMultiple = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var formData, newupload;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              console.log(multipreview);\n\n              if (!(multipreview == null)) {\n                _context2.next = 4;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 4:\n              formData = new FormData(formMulti.current);\n              console.log(formData);\n              _context2.next = 8;\n              return fetch('http://localhost:3600/uploadmultiple', {\n                method: 'POST',\n                body: formData\n              }).then(function (response) {\n                return response.json();\n              });\n\n            case 8:\n              newupload = _context2.sent;\n              console.log(newupload);\n\n              if (newupload) {\n                setMultiPreview(null);\n                setFile(null);\n                console.log(newupload);\n                loadImages(e);\n              }\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function uploadImageMultiple(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleFileChangeSingle = function handleFileChangeSingle(e) {\n    e.persist();\n    setPreview(URL.createObjectURL(e.target.files[0]));\n    setFile(e.target.files[0]);\n  };\n\n  var handleFileChangeMulti = function handleFileChangeMulti(e) {\n    e.persist();\n    setFile(e.target.files);\n    var files = e.target.files;\n    var mpreview = [];\n\n    for (var i = 0; i < files.length; i++) {\n      mpreview.push(URL.createObjectURL(files[i]));\n    }\n\n    setMultiPreview(mpreview);\n    console.log(mpreview);\n  };\n\n  var removeImage = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e, image) {\n      var newremove;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              e.preventDefault();\n              _context3.next = 3;\n              return fetch(baseConfig.baseURL + '/removeimage/' + image, {\n                method: 'DELETE'\n              }).then(function (response) {\n                return response.status;\n              });\n\n            case 3:\n              newremove = _context3.sent;\n\n              if (newremove) {\n                console.log(newremove);\n              }\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function removeImage(_x3, _x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var loadImages = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e) {\n      var getImages;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              e.preventDefault();\n              setLoadingImages(true);\n              _context4.next = 4;\n              return fetch('http://localhost:3600/getallimages', {\n                method: 'GET'\n              }).then(function (response) {\n                return response.json();\n              });\n\n            case 4:\n              getImages = _context4.sent;\n\n              if (getImages) {\n                setImages(getImages.images);\n              }\n\n            case 6:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function loadImages(_x5) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var doneLoading = function doneLoading(e) {\n    e.persist();\n    setLoadingImages(false);\n  };\n\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'body',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    id: \"left\",\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, __jsx(\"h2\", {\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, \"Single Image Upload\"), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'uploadform',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, __jsx(\"form\", {\n    onSubmit: uploadImageSingle,\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'previewframe',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }, __jsx(\"img\", {\n    src: preview ? preview : '/imageplaceholder.png',\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'preview',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 55\n    }\n  })), __jsx(\"label\", {\n    htmlFor: \"fileid\",\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, file ? file.name : 'Select image'), __jsx(\"input\", {\n    id: \"fileid\",\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: handleFileChangeSingle,\n    required: true,\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 25\n    }\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, \"Upload Image\"))), __jsx(\"h2\", {\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }, \"Multiple Image Upload\"), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'uploadform',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, __jsx(\"form\", {\n    ref: formMulti,\n    onSubmit: uploadImageMultiple,\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'previewframe',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, __jsx(\"img\", {\n    src: preview ? preview : '/imageplaceholder.png',\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'preview',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 55\n    }\n  })), __jsx(\"label\", {\n    htmlFor: \"fileidmulti\",\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }, file ? file.name : 'Select images'), __jsx(\"input\", {\n    id: \"fileidmulti\",\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: handleFileChangeMulti,\n    required: true,\n    multiple: true,\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 25\n    }\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 25\n    }\n  }, \"Upload Images\")))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'images',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, __jsx(\"h1\", {\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }, \"My Images\"), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'imageholder',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }\n  }, images != null ? images.map(function (image, i) {\n    if (i == images.length - 1) {\n      return __jsx(\"div\", {\n        key: i,\n        className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'imgframe',\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 37\n        }\n      }, __jsx(\"div\", {\n        onClick: function onClick(e) {\n          return removeImage(e, image);\n        },\n        className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'x',\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 41\n        }\n      }, \"x\"), __jsx(\"img\", {\n        onLoad: doneLoading,\n        src: baseConfig.backendImages + image,\n        className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 41\n        }\n      }));\n    } else {\n      return __jsx(\"div\", {\n        key: i,\n        className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'imgframe',\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 37\n        }\n      }, __jsx(\"div\", {\n        onClick: function onClick(e) {\n          return removeImage(e, image);\n        },\n        className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'x',\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 41\n        }\n      }, \"x\"), __jsx(\"img\", {\n        src: baseConfig.backendImages + image,\n        className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 41\n        }\n      }));\n    }\n  }) : __jsx(\"h2\", {\n    onClick: loadImages,\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 29\n    }\n  }, \"Load Images\"), __jsx(\"img\", {\n    src: \"/loading_bubble.gif\",\n    className: _JSXStyle.dynamic([[\"161397967\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'loader',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }))), __jsx(_JSXStyle, {\n    id: \"161397967\",\n    dynamic: [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.charcoal],\n    __self: this\n  }, \".imageholder.__jsx-style-dynamic-selector{float:left;width:90%;padding:5px 5%;min-height:500px;position:relative;margin-top:10px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;}.loader.__jsx-style-dynamic-selector{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);display:\".concat(loadingImages ? 'block' : 'none', \";width:52px;height:52px;}.imgframe.__jsx-style-dynamic-selector{float:left;width:150px;height:120px;margin:8px;overflow:hidden;position:relative;background:rgba(200,200,200,.2);box-shadow:0 0 1px \").concat(Theme.colors.gunmetal, \";}.imgframe.__jsx-style-dynamic-selector img.__jsx-style-dynamic-selector{position:absolute;width:100%;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}.x.__jsx-style-dynamic-selector{position:absolute;right:10px;top:10px;padding:0 8px;padding-bottom:4px;text-align:center;font:18px 'Roboto';cursor:pointer;opacity:.7;-webkit-transition:all .3s ease;transition:all .3s ease;z-index:999;background:rgba(255,255,255,1);}.x.__jsx-style-dynamic-selector:hover{opacity:1;}.images.__jsx-style-dynamic-selector{float:left;width:60%;}.images.__jsx-style-dynamic-selector h1.__jsx-style-dynamic-selector{float:left;font:30px 'Montserrat';margin:0;margin-left:30px;padding:10px;}.uploadform.__jsx-style-dynamic-selector input.__jsx-style-dynamic-selector{display:none;}.uploadform.__jsx-style-dynamic-selector label.__jsx-style-dynamic-selector{position:absolute;top:60px;left:20px;padding:10px;cursor:pointer;opacity:.7;-webkit-transition:all .3s ease;transition:all .3s ease;font:14px 'Roboto';}.uploadform.__jsx-style-dynamic-selector label.__jsx-style-dynamic-selector:hover{opacity:1;}.uploadform.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector{position:absolute;bottom:90px;left:20px;padding:10px;cursor:pointer;opacity:.7;-webkit-transition:all .3s ease;transition:all .3s ease;font:14px 'Roboto';}.uploadform.__jsx-style-dynamic-selector .previewframe.__jsx-style-dynamic-selector{position:absolute;right:20px;top:20px;width:300px;max-height:300px;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;}.uploadform.__jsx-style-dynamic-selector .previewframe.__jsx-style-dynamic-selector img.__jsx-style-dynamic-selector{float:left;width:100%;height:auto;}.uploadform.__jsx-style-dynamic-selector form.__jsx-style-dynamic-selector{float:left;width:100%;height:100%;}.uploadform.__jsx-style-dynamic-selector{float:left;width:100%;position:relative;min-height:300px;}#left.__jsx-style-dynamic-selector h2.__jsx-style-dynamic-selector{float:left;margin:0;width:90%;padding:10px 5%;box-shadow:0 0 1px \").concat(Theme.colors.charcoal, \";font:22px 'Raleway';}#left.__jsx-style-dynamic-selector{float:left;width:40%;height:100%;}.body.__jsx-style-dynamic-selector{float:left;width:100%;height:100%;margin-top:90px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93aWxsaWFtZm9ydGUvQ2FudmFzL2J1cmtlZGV2ZWxvcGluZy9wYWdlcy9iYWNrZW5kX2hvc3RfY29udHJvbGxlci9pbWFnZXVwbG9hZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFzSndCLEFBR2dDLEFBWU8sQUFTUCxBQVVPLEFBT0EsQUFjUixBQUdDLEFBSUEsQUFPRSxBQUdLLEFBVVIsQUFHUSxBQVVBLEFBV1AsQUFLQSxBQUtBLEFBTUEsQUFRQSxBQUtBLFVBL0VmLEFBMkJBLENBL0VjLEFBcUJFLEFBa0NGLEFBSWEsQUE0Q1osQUFLQSxBQUtBLEFBTUYsQUFRQyxBQUtDLEVBbEVmLEtBdERZLEFBbUJHLEFBT0EsQUErQkYsQUFhRyxBQVVELEVBNEJELENBdkhLLEFBdURuQixBQXdFZ0IsQ0F4QkEsQUFLQSxBQUtNLEFBbUJOLENBL0dDLEdBVEosQ0F5REMsRUF0Q0YsQUFPQyxBQXNEQSxDQVZDLEFBc0NNLEdBUXBCLENBckVhLEFBNkNiLEFBS0EsQUF3Qm9CLENBeEhnQixDQVpmLEFBcUJOLENBVUYsQUFzQ0ksQ0EvQkMsQUFzREYsRUFWQyxBQStCSSxHQXREQSxHQTNCZSxBQXdGZ0IsQ0FsR2hDLEdBZ0RELEFBdUJFLEFBd0NyQixFQTlGdUIsQ0F0Q0QsQUFrRkgsSUErQm5CLEdBdERpQixHQXJDSyxFQWdEUCxFQXVCSyxDQVZMLEdBbEZLLEFBc0NFLEVBcUJ0QixHQVc0QixHQWFBLEVBN0RRLEVBdUVuQixJQTVGQSxFQXNDTSxLQWdGQyxjQS9FTCxLQWpCaUMsQ0FpR3BELFNBL0VlLFNBOEJRLEVBN0JLLENBMENMLEtBekVrQixXQW9CekMsQUF5Q0EsR0FhQSxHQVMyQixJQTVGUixBQXNCbkIsZ0JBWmUsV0FDQyxFQThCQSxVQTdCaEIsRUE4Qm1DLGdCQXpDUixlQTBDM0IsdUJBa0R5Qiw2REEzRkEsZUE0RnpCLDZEQTNGQSIsImZpbGUiOiIvVXNlcnMvd2lsbGlhbWZvcnRlL0NhbnZhcy9idXJrZWRldmVsb3BpbmcvcGFnZXMvYmFja2VuZF9ob3N0X2NvbnRyb2xsZXIvaW1hZ2V1cGxvYWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBiYXNlQ29uZmlnIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvcmVzdHNlcnZpY2UnXG5pbXBvcnQgVGhlbWUgZnJvbSAnLi4vLi4vc3R5bGVzL3RoZW1lJ1xuXG5mdW5jdGlvbiBVcGxvYWRJbWFnZSh7Zmlyc3RMb2FkSW1hZ2VzfSkge1xuXG4gICAgY29uc3QgW2ltYWdlcywgc2V0SW1hZ2VzXSA9IHVzZVN0YXRlKGZpcnN0TG9hZEltYWdlcylcbiAgICBjb25zdCBbZmlsZSwgc2V0RmlsZV0gPSB1c2VTdGF0ZShudWxsKVxuICAgIGNvbnN0IFtwcmV2aWV3LCBzZXRQcmV2aWV3XSA9IHVzZVN0YXRlKG51bGwpXG4gICAgY29uc3QgW211bHRpcHJldmlldywgc2V0TXVsdGlQcmV2aWV3XSA9IHVzZVN0YXRlKG51bGwpXG4gICAgY29uc3QgW2xvYWRpbmdJbWFnZXMsIHNldExvYWRpbmdJbWFnZXNdID0gdXNlU3RhdGUoZmFsc2UpXG4gICAgY29uc3QgZm9ybU11bHRpID0gdXNlUmVmKG51bGwpXG5cbiAgICBjb25zdCB1cGxvYWRJbWFnZVNpbmdsZSA9IGFzeW5jKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGlmKGZpbGUgPT0gbnVsbCkgcmV0dXJuIFxuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpXG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZChcIm15RmlsZVwiLCBmaWxlKVxuICAgICAgICBjb25zdCB1cGxvYWRJbWFnZSA9IGF3YWl0IGZldGNoKGJhc2VDb25maWcuYmFzZVVSTCArICcvdXBsb2FkZmlsZScsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgYm9keTogZm9ybURhdGFcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxuICAgICAgICB9KVxuICAgICAgICBpZih1cGxvYWRJbWFnZSkge1xuICAgICAgICAgICAgc2V0UHJldmlldyhudWxsKVxuICAgICAgICAgICAgc2V0RmlsZShudWxsKVxuICAgICAgICAgICAgbG9hZEltYWdlcyhlKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdXBsb2FkSW1hZ2VNdWx0aXBsZSA9IGFzeW5jKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGNvbnNvbGUubG9nKG11bHRpcHJldmlldylcbiAgICAgICAgaWYobXVsdGlwcmV2aWV3ID09IG51bGwpIHJldHVybiBcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybU11bHRpLmN1cnJlbnQpXG5cblxuICAgICAgICBjb25zb2xlLmxvZyhmb3JtRGF0YSlcbiAgICAgICAgY29uc3QgbmV3dXBsb2FkID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6MzYwMC91cGxvYWRtdWx0aXBsZScsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgYm9keTogZm9ybURhdGFcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxuICAgICAgICB9KVxuICAgICAgICBjb25zb2xlLmxvZyhuZXd1cGxvYWQpXG4gICAgICAgIGlmKG5ld3VwbG9hZCkge1xuICAgICAgICAgICAgc2V0TXVsdGlQcmV2aWV3KG51bGwpXG4gICAgICAgICAgICBzZXRGaWxlKG51bGwpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhuZXd1cGxvYWQpXG4gICAgICAgICAgICBsb2FkSW1hZ2VzKGUpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVGaWxlQ2hhbmdlU2luZ2xlID0gKGUpID0+IHtcbiAgICAgICAgZS5wZXJzaXN0KClcbiAgICAgICAgc2V0UHJldmlldyhVUkwuY3JlYXRlT2JqZWN0VVJMKGUudGFyZ2V0LmZpbGVzWzBdKSlcbiAgICAgICAgc2V0RmlsZShlLnRhcmdldC5maWxlc1swXSlcbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVGaWxlQ2hhbmdlTXVsdGkgPSAoZSkgPT4ge1xuICAgICAgICBlLnBlcnNpc3QoKVxuICAgICAgICBzZXRGaWxlKGUudGFyZ2V0LmZpbGVzKVxuICAgICAgICBjb25zdCBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzO1xuICAgICAgICBjb25zdCBtcHJldmlldyA9IFtdXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG1wcmV2aWV3LnB1c2goVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlc1tpXSkpXG4gICAgICAgIH1cbiAgICAgICAgc2V0TXVsdGlQcmV2aWV3KG1wcmV2aWV3KVxuICAgICAgICBjb25zb2xlLmxvZyhtcHJldmlldylcbiAgICB9XG5cbiAgICBjb25zdCByZW1vdmVJbWFnZSA9IGFzeW5jKGUsIGltYWdlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICBjb25zdCBuZXdyZW1vdmUgPSBhd2FpdCBmZXRjaChiYXNlQ29uZmlnLmJhc2VVUkwgKyAnL3JlbW92ZWltYWdlLycgKyBpbWFnZSwge1xuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzXG4gICAgICAgIH0pXG4gICAgICAgIGlmKG5ld3JlbW92ZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2cobmV3cmVtb3ZlKVxuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBsb2FkSW1hZ2VzID0gYXN5bmMoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgc2V0TG9hZGluZ0ltYWdlcyh0cnVlKVxuICAgICAgICBjb25zdCBnZXRJbWFnZXMgPSBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDozNjAwL2dldGFsbGltYWdlcycsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIH0pLnRoZW4gKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgICAgICAgfSlcbiAgICAgICAgaWYoZ2V0SW1hZ2VzKSB7XG4gICAgICAgICAgICBzZXRJbWFnZXMoZ2V0SW1hZ2VzLmltYWdlcylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGRvbmVMb2FkaW5nID0gKGUpID0+IHtcbiAgICAgICAgZS5wZXJzaXN0KClcbiAgICAgICAgc2V0TG9hZGluZ0ltYWdlcyhmYWxzZSlcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYm9keSc+XG4gICAgICAgICAgICA8ZGl2IGlkPVwibGVmdFwiPlxuICAgICAgICAgICAgICAgIDxoMj5TaW5nbGUgSW1hZ2UgVXBsb2FkPC9oMj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndXBsb2FkZm9ybSc+XG4gICAgICAgICAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXt1cGxvYWRJbWFnZVNpbmdsZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJldmlld2ZyYW1lJz48aW1nIGNsYXNzTmFtZT0ncHJldmlldycgc3JjPXtwcmV2aWV3ID8gcHJldmlldzogJy9pbWFnZXBsYWNlaG9sZGVyLnBuZyd9IC8+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj0nZmlsZWlkJz57ZmlsZSA/IGZpbGUubmFtZTogJ1NlbGVjdCBpbWFnZSd9PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0nZmlsZWlkJyB0eXBlPSdmaWxlJyBhY2NlcHQ9J2ltYWdlLyonIG9uQ2hhbmdlPXtoYW5kbGVGaWxlQ2hhbmdlU2luZ2xlfSByZXF1aXJlZCAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSdzdWJtaXQnPlVwbG9hZCBJbWFnZTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGgyPk11bHRpcGxlIEltYWdlIFVwbG9hZDwvaDI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3VwbG9hZGZvcm0nPlxuICAgICAgICAgICAgICAgICAgICA8Zm9ybSByZWY9e2Zvcm1NdWx0aX0gb25TdWJtaXQ9e3VwbG9hZEltYWdlTXVsdGlwbGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ByZXZpZXdmcmFtZSc+PGltZyBjbGFzc05hbWU9J3ByZXZpZXcnIHNyYz17cHJldmlldyA/IHByZXZpZXc6ICcvaW1hZ2VwbGFjZWhvbGRlci5wbmcnfSAvPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9J2ZpbGVpZG11bHRpJz57ZmlsZSA/IGZpbGUubmFtZTogJ1NlbGVjdCBpbWFnZXMnfTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9J2ZpbGVpZG11bHRpJyB0eXBlPSdmaWxlJyBhY2NlcHQ9J2ltYWdlLyonIG9uQ2hhbmdlPXtoYW5kbGVGaWxlQ2hhbmdlTXVsdGl9IHJlcXVpcmVkIG11bHRpcGxlLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0nc3VibWl0Jz5VcGxvYWQgSW1hZ2VzPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ltYWdlcyc+XG4gICAgICAgICAgICAgICAgICAgIDxoMT5NeSBJbWFnZXM8L2gxPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0naW1hZ2Vob2xkZXInPlxuICAgICAgICAgICAgICAgICAgICAgICAge2ltYWdlcyAhPSBudWxsID8gaW1hZ2VzLm1hcCgoaW1hZ2UsIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpID09IGltYWdlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPSdpbWdmcmFtZSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBvbkNsaWNrPXsoZSkgPT4gcmVtb3ZlSW1hZ2UoZSwgaW1hZ2UpfSBjbGFzc05hbWU9J3gnPng8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIG9uTG9hZD17ZG9uZUxvYWRpbmd9IHNyYz17YmFzZUNvbmZpZy5iYWNrZW5kSW1hZ2VzICsgaW1hZ2V9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPSdpbWdmcmFtZSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBvbkNsaWNrPXsoZSkgPT4gcmVtb3ZlSW1hZ2UoZSwgaW1hZ2UpfSBjbGFzc05hbWU9J3gnPng8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz17YmFzZUNvbmZpZy5iYWNrZW5kSW1hZ2VzICsgaW1hZ2V9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOiA8aDIgb25DbGljaz17bG9hZEltYWdlc30+TG9hZCBJbWFnZXM8L2gyPn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3NOYW1lPSdsb2FkZXInIHNyYz0nL2xvYWRpbmdfYnViYmxlLmdpZicgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgICAgICAgLmltYWdlaG9sZGVyIHtcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiA5MCU7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDVweCA1JTtcbiAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogNTAwcHg7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgYWxpZ24tY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAubG9hZGVyIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJHtsb2FkaW5nSW1hZ2VzID8gJ2Jsb2NrJzogJ25vbmUnfTtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDUycHg7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogNTJweDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLmltZ2ZyYW1lIHtcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxNTBweDtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMjBweDtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiA4cHg7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyMDAsMjAwLDIwMCwuMik7XG4gICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAxcHggJHtUaGVtZS5jb2xvcnMuZ3VubWV0YWx9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAuaW1nZnJhbWUgaW1nIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC54IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgICAgICByaWdodDogMTBweDtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAxMHB4O1xuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwIDhweDtcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDRweDtcbiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICAgICAgICBmb250OiAxOHB4ICdSb2JvdG8nO1xuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IC43O1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgLjNzIGVhc2U7XG4gICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IDk5OTtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLng6aG92ZXIge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAuaW1hZ2VzIHtcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiA2MCU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC5pbWFnZXMgaDEge1xuICAgICAgICAgICAgICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgICAgICAgICAgICAgICAgZm9udDogMzBweCAnTW9udHNlcnJhdCc7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDMwcHg7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC51cGxvYWRmb3JtIGlucHV0IHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLnVwbG9hZGZvcm0gbGFiZWwge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogNjBweDtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMjBweDtcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAuNztcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIC4zcyBlYXNlO1xuICAgICAgICAgICAgICAgICAgICBmb250OiAxNHB4ICdSb2JvdG8nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAudXBsb2FkZm9ybSBsYWJlbDpob3ZlciB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC51cGxvYWRmb3JtIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiA5MHB4O1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAyMHB4O1xuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IC43O1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgLjNzIGVhc2U7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQ6IDE0cHggJ1JvYm90byc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC51cGxvYWRmb3JtIC5wcmV2aWV3ZnJhbWUge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAyMHB4O1xuICAgICAgICAgICAgICAgICAgICB0b3A6IDIwcHg7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzMDBweDtcbiAgICAgICAgICAgICAgICAgICAgbWF4LWhlaWdodDogMzAwcHg7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgICAgICAgICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC51cGxvYWRmb3JtIC5wcmV2aWV3ZnJhbWUgaW1nIHtcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC51cGxvYWRmb3JtIGZvcm0ge1xuICAgICAgICAgICAgICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLnVwbG9hZGZvcm0ge1xuICAgICAgICAgICAgICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMzAwcHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICNsZWZ0IGgyIHtcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDkwJTtcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTBweCA1JTtcbiAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDFweCAke1RoZW1lLmNvbG9ycy5jaGFyY29hbH07XG4gICAgICAgICAgICAgICAgICAgIGZvbnQ6IDIycHggJ1JhbGV3YXknO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAjbGVmdCB7XG4gICAgICAgICAgICAgICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDAlO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC5ib2R5IHtcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDkwcHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYH08L3N0eWxlPlxuICAgICAgICA8L2Rpdj5cbiAgICApXG59XG5cblVwbG9hZEltYWdlLmdldEluaXRpYWxQcm9wcyA9IGFzeW5jKGUpID0+IHtcbiAgICBcbiAgICBjb25zdCBnZXRpbWcgPSBhd2FpdCBmZXRjaChiYXNlQ29uZmlnLmJhc2VVUkwgKyAnL2dldGFsbGltYWdlcycsIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICB9KS50aGVuIChyZXNwb25zZSA9PiB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgICB9KVxuICAgIHJldHVybiB7Zmlyc3RMb2FkSW1hZ2VzOiBnZXRpbWcuaW1hZ2VzfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVcGxvYWRJbWFnZSJdfQ== */\\n/*@ sourceURL=/Users/williamforte/Canvas/burkedeveloping/pages/backend_host_controller/imageupload.js */\")));\n}\n\n_s(UploadImage, \"P5iIIe7OvsmKnTeC/Ny8pbnhttI=\");\n\n_c = UploadImage;\n\nUploadImage.getInitialProps = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e) {\n    var getimg;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return fetch(baseConfig.baseURL + '/getallimages', {\n              method: 'GET'\n            }).then(function (response) {\n              return response.json();\n            });\n\n          case 2:\n            getimg = _context5.sent;\n            return _context5.abrupt(\"return\", {\n              firstLoadImages: getimg.images\n            });\n\n          case 4:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function (_x6) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\nexport default UploadImage;\n\nvar _c;\n\n$RefreshReg$(_c, \"UploadImage\");","map":{"version":3,"sources":["/Users/williamforte/Canvas/burkedeveloping/pages/backend_host_controller/imageupload.js"],"names":["useState","useRef","baseConfig","Theme","UploadImage","firstLoadImages","images","setImages","file","setFile","preview","setPreview","multipreview","setMultiPreview","loadingImages","setLoadingImages","formMulti","uploadImageSingle","e","preventDefault","formData","FormData","append","fetch","baseURL","method","body","then","response","json","uploadImage","loadImages","uploadImageMultiple","console","log","current","newupload","handleFileChangeSingle","persist","URL","createObjectURL","target","files","handleFileChangeMulti","mpreview","i","length","push","removeImage","image","status","newremove","getImages","doneLoading","colors","gunmetal","charcoal","name","map","backendImages","getInitialProps","getimg"],"mappings":"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","sourcesContent":["import { useState, useRef } from 'react'\nimport { baseConfig } from '../../services/restservice'\nimport Theme from '../../styles/theme'\n\nfunction UploadImage({firstLoadImages}) {\n\n    const [images, setImages] = useState(firstLoadImages)\n    const [file, setFile] = useState(null)\n    const [preview, setPreview] = useState(null)\n    const [multipreview, setMultiPreview] = useState(null)\n    const [loadingImages, setLoadingImages] = useState(false)\n    const formMulti = useRef(null)\n\n    const uploadImageSingle = async(e) => {\n        e.preventDefault()\n        if(file == null) return \n        const formData = new FormData()\n        formData.append(\"myFile\", file)\n        const uploadImage = await fetch(baseConfig.baseURL + '/uploadfile', {\n            method: 'POST',\n            body: formData\n        })\n        .then(response => {\n            return response.json()\n        })\n        if(uploadImage) {\n            setPreview(null)\n            setFile(null)\n            loadImages(e)\n        }\n    }\n\n    const uploadImageMultiple = async(e) => {\n        e.preventDefault()\n        console.log(multipreview)\n        if(multipreview == null) return \n        const formData = new FormData(formMulti.current)\n\n\n        console.log(formData)\n        const newupload = await fetch('http://localhost:3600/uploadmultiple', {\n            method: 'POST',\n            body: formData\n        })\n        .then(response => {\n            return response.json()\n        })\n        console.log(newupload)\n        if(newupload) {\n            setMultiPreview(null)\n            setFile(null)\n            console.log(newupload)\n            loadImages(e)\n        }\n    }\n\n    const handleFileChangeSingle = (e) => {\n        e.persist()\n        setPreview(URL.createObjectURL(e.target.files[0]))\n        setFile(e.target.files[0])\n    }\n\n    const handleFileChangeMulti = (e) => {\n        e.persist()\n        setFile(e.target.files)\n        const files = e.target.files;\n        const mpreview = []\n        for (var i = 0; i < files.length; i++) {\n            mpreview.push(URL.createObjectURL(files[i]))\n        }\n        setMultiPreview(mpreview)\n        console.log(mpreview)\n    }\n\n    const removeImage = async(e, image) => {\n        e.preventDefault()\n        const newremove = await fetch(baseConfig.baseURL + '/removeimage/' + image, {\n            method: 'DELETE',\n        }).then(response => {\n            return response.status\n        })\n        if(newremove) {\n            console.log(newremove)\n\n        }\n    }\n\n    const loadImages = async(e) => {\n        e.preventDefault()\n        setLoadingImages(true)\n        const getImages = await fetch('http://localhost:3600/getallimages', {\n            method: 'GET',\n        }).then (response => {\n            return response.json()\n        })\n        if(getImages) {\n            setImages(getImages.images)\n        }\n    }\n\n    const doneLoading = (e) => {\n        e.persist()\n        setLoadingImages(false)\n    }\n\n    return (\n        <div className='body'>\n            <div id=\"left\">\n                <h2>Single Image Upload</h2>\n                <div className='uploadform'>\n                    <form onSubmit={uploadImageSingle}>\n                        <div className='previewframe'><img className='preview' src={preview ? preview: '/imageplaceholder.png'} /></div>\n                        <label htmlFor='fileid'>{file ? file.name: 'Select image'}</label>\n                        <input id='fileid' type='file' accept='image/*' onChange={handleFileChangeSingle} required />\n                        <button type='submit'>Upload Image</button>\n                    </form>\n                </div>\n                <h2>Multiple Image Upload</h2>\n                <div className='uploadform'>\n                    <form ref={formMulti} onSubmit={uploadImageMultiple}>\n                        <div className='previewframe'><img className='preview' src={preview ? preview: '/imageplaceholder.png'} /></div>\n                        <label htmlFor='fileidmulti'>{file ? file.name: 'Select images'}</label>\n                        <input id='fileidmulti' type='file' accept='image/*' onChange={handleFileChangeMulti} required multiple/>\n                        <button type='submit'>Upload Images</button>\n                    </form>\n                </div>\n            </div>\n            <div className='images'>\n                    <h1>My Images</h1>\n                    <div className='imageholder'>\n                        {images != null ? images.map((image, i) => {\n                            if(i == images.length - 1) {\n                                return (\n                                    <div key={i} className='imgframe'>\n                                        <div onClick={(e) => removeImage(e, image)} className='x'>x</div>\n                                        <img onLoad={doneLoading} src={baseConfig.backendImages + image} />\n                                    </div>\n                                )\n                            } else {\n                                return (\n                                    <div key={i} className='imgframe'>\n                                        <div onClick={(e) => removeImage(e, image)} className='x'>x</div>\n                                        <img src={baseConfig.backendImages + image} />\n                                    </div>\n                                )\n                            }\n                        }): <h2 onClick={loadImages}>Load Images</h2>}\n                        <img className='loader' src='/loading_bubble.gif' />\n                    </div>\n                </div>\n            <style jsx>{`\n                .imageholder {\n                    float: left;\n                    width: 90%;\n                    padding: 5px 5%;\n                    min-height: 500px;\n                    position: relative;\n                    margin-top: 10px;\n                    display: flex;\n                    flex-wrap: wrap;\n                    justify-content: center;\n                    align-content: center;\n                }\n                .loader {\n                    position: absolute;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                    display: ${loadingImages ? 'block': 'none'};\n                    width: 52px;\n                    height: 52px;\n                }\n                .imgframe {\n                    float: left;\n                    width: 150px;\n                    height: 120px;\n                    margin: 8px;\n                    overflow: hidden;\n                    position: relative;\n                    background: rgba(200,200,200,.2);\n                    box-shadow: 0 0 1px ${Theme.colors.gunmetal};\n                }\n                .imgframe img {\n                    position: absolute;\n                    width: 100%;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                }\n                .x {\n                    position: absolute;\n                    right: 10px;\n                    top: 10px;\n                    padding: 0 8px;\n                    padding-bottom: 4px;\n                    text-align: center;\n                    font: 18px 'Roboto';\n                    cursor: pointer;\n                    opacity: .7;\n                    transition: all .3s ease;\n                    z-index: 999;\n                    background: rgba(255,255,255,1);\n                }\n                .x:hover {\n                    opacity: 1;\n                }\n                .images {\n                    float: left;\n                    width: 60%;\n                }\n                .images h1 {\n                    float: left;\n                    font: 30px 'Montserrat';\n                    margin: 0;\n                    margin-left: 30px;\n                    padding: 10px;\n                }\n                .uploadform input {\n                    display: none;\n                }\n                .uploadform label {\n                    position: absolute;\n                    top: 60px;\n                    left: 20px;\n                    padding: 10px;\n                    cursor: pointer;\n                    opacity: .7;\n                    transition: all .3s ease;\n                    font: 14px 'Roboto';\n                }\n                .uploadform label:hover {\n                    opacity: 1;\n                }\n                .uploadform button {\n                    position: absolute;\n                    bottom: 90px;\n                    left: 20px;\n                    padding: 10px;\n                    cursor: pointer;\n                    opacity: .7;\n                    transition: all .3s ease;\n                    font: 14px 'Roboto';\n                }\n                .uploadform .previewframe {\n                    position: absolute;\n                    right: 20px;\n                    top: 20px;\n                    width: 300px;\n                    max-height: 300px;\n                    overflow: hidden;\n                    display: flex;\n                    justify-content: center;\n                    align-content: center;\n                }\n                .uploadform .previewframe img {\n                    float: left;\n                    width: 100%;\n                    height: auto;\n                }\n                .uploadform form {\n                    float: left;\n                    width: 100%;\n                    height: 100%;\n                }\n                .uploadform {\n                    float: left;\n                    width: 100%;\n                    position: relative;\n                    min-height: 300px;\n                }\n                #left h2 {\n                    float: left;\n                    margin: 0;\n                    width: 90%;\n                    padding: 10px 5%;\n                    box-shadow: 0 0 1px ${Theme.colors.charcoal};\n                    font: 22px 'Raleway';\n                }\n                #left {\n                    float: left;\n                    width: 40%;\n                    height: 100%;\n                }\n                .body {\n                    float: left;\n                    width: 100%;\n                    height: 100%;\n                    margin-top: 90px;\n                }\n            `}</style>\n        </div>\n    )\n}\n\nUploadImage.getInitialProps = async(e) => {\n    \n    const getimg = await fetch(baseConfig.baseURL + '/getallimages', {\n        method: 'GET',\n    }).then (response => {\n        return response.json()\n    })\n    return {firstLoadImages: getimg.images}\n}\n\nexport default UploadImage"]},"metadata":{},"sourceType":"module"}