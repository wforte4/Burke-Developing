{"ast":null,"code":"var _jsxFileName = \"/Users/williamforte/Canvas/burkedeveloping/pages/backend_host_controller/imageupload.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\nimport { baseConfig } from '../../services/restservice';\nimport Theme from '../../styles/theme';\n\nfunction UploadImage({\n  firstLoadImages\n}) {\n  const {\n    0: images,\n    1: setImages\n  } = useState(firstLoadImages);\n  const {\n    0: file,\n    1: setFile\n  } = useState(null);\n  const {\n    0: preview,\n    1: setPreview\n  } = useState(null);\n  const {\n    0: multipreview,\n    1: setMultiPreview\n  } = useState(null);\n  const {\n    0: loadingImages,\n    1: setLoadingImages\n  } = useState(false);\n\n  const uploadImageSingle = async e => {\n    e.preventDefault();\n    if (file == null) return;\n    const formData = new FormData();\n    formData.append(\"myFile\", file);\n    const uploadImage = await fetch(baseConfig.baseURL + '/uploadfile', {\n      method: 'POST',\n      body: formData\n    }).then(response => {\n      return response.json();\n    });\n\n    if (uploadImage) {\n      setPreview(null);\n      setFile(null);\n      loadImages(e);\n    }\n  };\n\n  const uploadImageMultiple = async e => {\n    e.preventDefault();\n    console.log(multipreview);\n    if (multipreview == null) return;\n    const formData = new FormData();\n\n    for (let i = 0; i < file.length; i++) {\n      console.log(file[i]);\n      formData.append(`myFiles[${i}]`, file[i]);\n    }\n\n    console.log(formData);\n    const newupload = await fetch('http://localhost:3600/uploadmultiple', {\n      method: 'POST',\n      body: formData\n    }).then(response => {\n      return response.json();\n    });\n    console.log(newupload);\n\n    if (newupload) {\n      setMultiPreview(null);\n      setFile(null);\n      console.log(newupload);\n      loadImages(e);\n    }\n  };\n\n  const handleFileChangeSingle = e => {\n    e.persist();\n    setPreview(URL.createObjectURL(e.target.files[0]));\n    setFile(e.target.files[0]);\n  };\n\n  const handleFileChangeMulti = e => {\n    e.persist();\n    setFile(e.target.files);\n    const files = e.target.files;\n    const mpreview = [];\n\n    for (var i = 0; i < files.length; i++) {\n      mpreview.push(URL.createObjectURL(files[i]));\n    }\n\n    setMultiPreview(mpreview);\n    console.log(mpreview);\n  };\n\n  const removeImage = async (e, image) => {\n    e.preventDefault();\n    setLoadingImages(true);\n    setImages(null);\n    const newremove = await fetch(baseConfig.baseURL + '/removeimage/' + image, {\n      method: 'DELETE'\n    }).then(response => {\n      return response.status;\n    });\n\n    if (newremove) {\n      console.log(newremove);\n      loadImages(e);\n    }\n  };\n\n  const loadImages = async e => {\n    e.preventDefault();\n    setLoadingImages(true);\n    const getImages = await fetch('http://localhost:3600/getallimages', {\n      method: 'GET'\n    }).then(response => {\n      return response.json();\n    });\n\n    if (getImages) {\n      setImages(getImages.images);\n    }\n  };\n\n  const doneLoading = e => {\n    e.persist();\n    setLoadingImages(false);\n  };\n\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'body',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    id: \"left\",\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, __jsx(\"h2\", {\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, \"Single Image Upload\"), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'uploadform',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }, __jsx(\"form\", {\n    onSubmit: uploadImageSingle,\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'previewframe',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, __jsx(\"img\", {\n    src: preview ? preview : '/imageplaceholder.png',\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'preview',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 55\n    }\n  })), __jsx(\"label\", {\n    htmlFor: \"fileid\",\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  }, file ? file.name : 'Select image'), __jsx(\"input\", {\n    id: \"fileid\",\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: handleFileChangeSingle,\n    required: true,\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, \"Upload Image\"))), __jsx(\"h2\", {\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, \"Multiple Image Upload\"), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'uploadform',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }, __jsx(\"form\", {\n    onSubmit: uploadImageMultiple,\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'previewframe',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 25\n    }\n  }, __jsx(\"img\", {\n    src: \"/imageplaceholder.png\",\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'preview',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 55\n    }\n  })), __jsx(\"label\", {\n    htmlFor: \"fileidmulti\",\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 25\n    }\n  }, \"Select images\"), __jsx(\"input\", {\n    id: \"fileidmulti\",\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: handleFileChangeMulti,\n    required: true,\n    multiple: true,\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  }, \"Upload Images\")))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'images',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, __jsx(\"h1\", {\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 21\n    }\n  }, \"My Images\"), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'imageholder',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, images != null ? images.map((image, i) => {\n    if (i == images.length - 1) {\n      return __jsx(\"div\", {\n        key: i,\n        className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'imgframe',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 37\n        }\n      }, __jsx(\"div\", {\n        onClick: e => removeImage(e, image),\n        className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'x',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 41\n        }\n      }, \"x\"), __jsx(\"img\", {\n        onLoad: doneLoading,\n        src: baseConfig.backendImages + image,\n        className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 41\n        }\n      }), __jsx(\"h3\", {\n        className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 41\n        }\n      }, image));\n    } else {\n      return __jsx(\"div\", {\n        key: i,\n        className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'imgframe',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 37\n        }\n      }, __jsx(\"div\", {\n        onClick: e => removeImage(e, image),\n        className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'x',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 41\n        }\n      }, \"x\"), __jsx(\"img\", {\n        src: baseConfig.backendImages + image,\n        className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 41\n        }\n      }), __jsx(\"h3\", {\n        className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 41\n        }\n      }, image.split('').map((char, i) => {\n        if (i > 14) return char;\n      })));\n    }\n  }) : __jsx(\"h2\", {\n    onClick: loadImages,\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 29\n    }\n  }, \"Load Images\"), __jsx(\"img\", {\n    src: \"/loading_bubble.gif\",\n    className: _JSXStyle.dynamic([[\"1834888939\", [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal]]]) + \" \" + 'loader',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 25\n    }\n  }))), __jsx(_JSXStyle, {\n    id: \"1834888939\",\n    dynamic: [loadingImages ? 'block' : 'none', Theme.colors.gunmetal, Theme.colors.gunmetal, Theme.colors.charcoal],\n    __self: this\n  }, `.imageholder.__jsx-style-dynamic-selector{float:left;width:90%;padding:5px 5%;min-height:500px;position:relative;margin-top:10px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;}.loader.__jsx-style-dynamic-selector{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);display:${loadingImages ? 'block' : 'none'};width:52px;height:52px;}.imgframe.__jsx-style-dynamic-selector{float:left;width:150px;height:120px;margin:8px;overflow:hidden;position:relative;background:rgba(200,200,200,.2);box-shadow:0 0 1px ${Theme.colors.gunmetal};}.imgframe.__jsx-style-dynamic-selector h3.__jsx-style-dynamic-selector{position:absolute;bottom:0;text-align:center;left:0;width:100%;padding:10px 0;background:rgba(255,255,255,.6);color:${Theme.colors.gunmetal};font:12px 'Open Sans';}.imgframe.__jsx-style-dynamic-selector img.__jsx-style-dynamic-selector{position:absolute;width:100%;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}.x.__jsx-style-dynamic-selector{position:absolute;right:10px;top:10px;padding:0 8px;padding-bottom:4px;text-align:center;font:18px 'Roboto';cursor:pointer;opacity:.7;-webkit-transition:all .3s ease;transition:all .3s ease;z-index:999;background:rgba(255,255,255,1);}.x.__jsx-style-dynamic-selector:hover{opacity:1;}.images.__jsx-style-dynamic-selector{float:left;width:60%;}.images.__jsx-style-dynamic-selector h1.__jsx-style-dynamic-selector{float:left;font:30px 'Montserrat';margin:0;margin-left:30px;padding:10px;}.uploadform.__jsx-style-dynamic-selector input.__jsx-style-dynamic-selector{display:none;}.uploadform.__jsx-style-dynamic-selector label.__jsx-style-dynamic-selector{position:absolute;top:60px;left:20px;padding:10px;cursor:pointer;opacity:.7;-webkit-transition:all .3s ease;transition:all .3s ease;font:14px 'Roboto';}.uploadform.__jsx-style-dynamic-selector label.__jsx-style-dynamic-selector:hover{opacity:1;}.uploadform.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector{position:absolute;bottom:90px;left:20px;padding:10px;cursor:pointer;opacity:.7;-webkit-transition:all .3s ease;transition:all .3s ease;font:14px 'Roboto';}.uploadform.__jsx-style-dynamic-selector .previewframe.__jsx-style-dynamic-selector{position:absolute;right:20px;top:20px;width:300px;max-height:300px;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;}.uploadform.__jsx-style-dynamic-selector .previewframe.__jsx-style-dynamic-selector img.__jsx-style-dynamic-selector{float:left;width:100%;height:auto;}.uploadform.__jsx-style-dynamic-selector form.__jsx-style-dynamic-selector{float:left;width:100%;height:100%;}.uploadform.__jsx-style-dynamic-selector{float:left;width:100%;position:relative;min-height:300px;}#left.__jsx-style-dynamic-selector h2.__jsx-style-dynamic-selector{float:left;margin:0;width:90%;padding:10px 5%;box-shadow:0 0 1px ${Theme.colors.charcoal};font:22px 'Raleway';}#left.__jsx-style-dynamic-selector{float:left;width:40%;height:100%;}.body.__jsx-style-dynamic-selector{float:left;width:100%;height:100%;margin-top:90px;}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93aWxsaWFtZm9ydGUvQ2FudmFzL2J1cmtlZGV2ZWxvcGluZy9wYWdlcy9iYWNrZW5kX2hvc3RfY29udHJvbGxlci9pbWFnZXVwbG9hZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUErSndCLEFBR2dDLEFBWU8sQUFTUCxBQVVPLEFBV0EsQUFPQSxBQWNSLEFBR0MsQUFJQSxBQU9FLEFBR0ssQUFVUixBQUdRLEFBVUEsQUFXUCxBQUtBLEFBS0EsQUFNQSxBQVFBLEFBS0EsVUEvRWYsQUEyQkEsQ0ExRmMsQUFxQkUsQUE2Q0YsQUFJYSxBQTRDWixBQUtBLEFBS0EsQUFNRixBQVFDLEFBS0MsRUFsRWYsS0FqRVksQUFtQkMsQUFXRSxBQU9BLEFBK0JGLEFBYUcsQUFVRCxFQTRCRCxDQWxJSyxBQWtFbkIsQUF3RWdCLENBeEJBLEFBS0EsQUFLTSxBQW1CTixDQTFIQyxHQVRKLENBbUJTLEFBaURSLEVBdENGLEFBT0MsQUFzREEsQ0FWQyxBQXNDTSxHQVFwQixDQXJFYSxBQTZDYixBQUtBLEFBd0JvQixDQW5JZ0IsQ0FaZixBQXFCTixDQXFCRixBQXNDSSxDQS9CQyxBQXNERixFQVZDLEFBK0JJLEdBdERBLEVBdkNWLENBWXlCLEFBd0ZnQixDQTdHaEMsR0EyREQsQUF1QkUsQUF3Q3JCLEVBaEhlLEFBa0JRLENBakRELEFBNkZILElBK0JuQixHQXREaUIsR0FoREssQUFVSCxFQWlESixFQXVCSyxDQVZMLEdBN0ZLLEFBaURFLEVBcUJ0QixHQVc0QixFQWpEUSxDQThEUixFQXhFUSxFQWtGbkIsSUF2R0EsRUFpRE0sS0FnRkMsY0EvRUwsRUFsQm9CLEdBVmEsQ0E0R3BELFNBL0VlLFNBOEJRLEVBN0JLLENBMENMLEtBcEZrQixLQXVCZixNQVExQixBQXlDQSxHQWFBLEdBUzJCLElBdkdSLEFBc0JuQixNQVdBLFVBdkJlLFdBQ0MsRUF5Q0EsVUF4Q2hCLEVBeUNtQyxnQkFwRFIsZUFxRDNCLHVCQWtEeUIsNkRBdEdBLGVBdUd6Qiw2REF0R0EiLCJmaWxlIjoiL1VzZXJzL3dpbGxpYW1mb3J0ZS9DYW52YXMvYnVya2VkZXZlbG9waW5nL3BhZ2VzL2JhY2tlbmRfaG9zdF9jb250cm9sbGVyL2ltYWdldXBsb2FkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IGJhc2VDb25maWcgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9yZXN0c2VydmljZSdcbmltcG9ydCBUaGVtZSBmcm9tICcuLi8uLi9zdHlsZXMvdGhlbWUnXG5cbmZ1bmN0aW9uIFVwbG9hZEltYWdlKHtmaXJzdExvYWRJbWFnZXN9KSB7XG5cbiAgICBjb25zdCBbaW1hZ2VzLCBzZXRJbWFnZXNdID0gdXNlU3RhdGUoZmlyc3RMb2FkSW1hZ2VzKVxuICAgIGNvbnN0IFtmaWxlLCBzZXRGaWxlXSA9IHVzZVN0YXRlKG51bGwpXG4gICAgY29uc3QgW3ByZXZpZXcsIHNldFByZXZpZXddID0gdXNlU3RhdGUobnVsbClcbiAgICBjb25zdCBbbXVsdGlwcmV2aWV3LCBzZXRNdWx0aVByZXZpZXddID0gdXNlU3RhdGUobnVsbClcbiAgICBjb25zdCBbbG9hZGluZ0ltYWdlcywgc2V0TG9hZGluZ0ltYWdlc10gPSB1c2VTdGF0ZShmYWxzZSlcblxuICAgIGNvbnN0IHVwbG9hZEltYWdlU2luZ2xlID0gYXN5bmMoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgaWYoZmlsZSA9PSBudWxsKSByZXR1cm4gXG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKClcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwibXlGaWxlXCIsIGZpbGUpXG4gICAgICAgIGNvbnN0IHVwbG9hZEltYWdlID0gYXdhaXQgZmV0Y2goYmFzZUNvbmZpZy5iYXNlVVJMICsgJy91cGxvYWRmaWxlJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBmb3JtRGF0YVxuICAgICAgICB9KVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXG4gICAgICAgIH0pXG4gICAgICAgIGlmKHVwbG9hZEltYWdlKSB7XG4gICAgICAgICAgICBzZXRQcmV2aWV3KG51bGwpXG4gICAgICAgICAgICBzZXRGaWxlKG51bGwpXG4gICAgICAgICAgICBsb2FkSW1hZ2VzKGUpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB1cGxvYWRJbWFnZU11bHRpcGxlID0gYXN5bmMoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgY29uc29sZS5sb2cobXVsdGlwcmV2aWV3KVxuICAgICAgICBpZihtdWx0aXByZXZpZXcgPT0gbnVsbCkgcmV0dXJuIFxuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpXG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlW2ldKVxuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGBteUZpbGVzWyR7aX1dYCwgZmlsZVtpXSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGZvcm1EYXRhKVxuICAgICAgICBjb25zdCBuZXd1cGxvYWQgPSBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDozNjAwL3VwbG9hZG11bHRpcGxlJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBmb3JtRGF0YVxuICAgICAgICB9KVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnNvbGUubG9nKG5ld3VwbG9hZClcbiAgICAgICAgaWYobmV3dXBsb2FkKSB7XG4gICAgICAgICAgICBzZXRNdWx0aVByZXZpZXcobnVsbClcbiAgICAgICAgICAgIHNldEZpbGUobnVsbClcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG5ld3VwbG9hZClcbiAgICAgICAgICAgIGxvYWRJbWFnZXMoZSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGhhbmRsZUZpbGVDaGFuZ2VTaW5nbGUgPSAoZSkgPT4ge1xuICAgICAgICBlLnBlcnNpc3QoKVxuICAgICAgICBzZXRQcmV2aWV3KFVSTC5jcmVhdGVPYmplY3RVUkwoZS50YXJnZXQuZmlsZXNbMF0pKVxuICAgICAgICBzZXRGaWxlKGUudGFyZ2V0LmZpbGVzWzBdKVxuICAgIH1cblxuICAgIGNvbnN0IGhhbmRsZUZpbGVDaGFuZ2VNdWx0aSA9IChlKSA9PiB7XG4gICAgICAgIGUucGVyc2lzdCgpXG4gICAgICAgIHNldEZpbGUoZS50YXJnZXQuZmlsZXMpXG4gICAgICAgIGNvbnN0IGZpbGVzID0gZS50YXJnZXQuZmlsZXM7XG4gICAgICAgIGNvbnN0IG1wcmV2aWV3ID0gW11cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbXByZXZpZXcucHVzaChVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGVzW2ldKSlcbiAgICAgICAgfVxuICAgICAgICBzZXRNdWx0aVByZXZpZXcobXByZXZpZXcpXG4gICAgICAgIGNvbnNvbGUubG9nKG1wcmV2aWV3KVxuICAgIH1cblxuICAgIGNvbnN0IHJlbW92ZUltYWdlID0gYXN5bmMoZSwgaW1hZ2UpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIHNldExvYWRpbmdJbWFnZXModHJ1ZSlcbiAgICAgICAgc2V0SW1hZ2VzKG51bGwpXG4gICAgICAgIGNvbnN0IG5ld3JlbW92ZSA9IGF3YWl0IGZldGNoKGJhc2VDb25maWcuYmFzZVVSTCArICcvcmVtb3ZlaW1hZ2UvJyArIGltYWdlLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXNcbiAgICAgICAgfSlcbiAgICAgICAgaWYobmV3cmVtb3ZlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhuZXdyZW1vdmUpXG4gICAgICAgICAgICBsb2FkSW1hZ2VzKGUpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBsb2FkSW1hZ2VzID0gYXN5bmMoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgc2V0TG9hZGluZ0ltYWdlcyh0cnVlKVxuICAgICAgICBjb25zdCBnZXRJbWFnZXMgPSBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDozNjAwL2dldGFsbGltYWdlcycsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIH0pLnRoZW4gKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgICAgICAgfSlcbiAgICAgICAgaWYoZ2V0SW1hZ2VzKSB7XG4gICAgICAgICAgICBzZXRJbWFnZXMoZ2V0SW1hZ2VzLmltYWdlcylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGRvbmVMb2FkaW5nID0gKGUpID0+IHtcbiAgICAgICAgZS5wZXJzaXN0KClcbiAgICAgICAgc2V0TG9hZGluZ0ltYWdlcyhmYWxzZSlcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYm9keSc+XG4gICAgICAgICAgICA8ZGl2IGlkPVwibGVmdFwiPlxuICAgICAgICAgICAgICAgIDxoMj5TaW5nbGUgSW1hZ2UgVXBsb2FkPC9oMj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndXBsb2FkZm9ybSc+XG4gICAgICAgICAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXt1cGxvYWRJbWFnZVNpbmdsZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJldmlld2ZyYW1lJz48aW1nIGNsYXNzTmFtZT0ncHJldmlldycgc3JjPXtwcmV2aWV3ID8gcHJldmlldzogJy9pbWFnZXBsYWNlaG9sZGVyLnBuZyd9IC8+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj0nZmlsZWlkJz57ZmlsZSA/IGZpbGUubmFtZTogJ1NlbGVjdCBpbWFnZSd9PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0nZmlsZWlkJyB0eXBlPSdmaWxlJyBhY2NlcHQ9J2ltYWdlLyonIG9uQ2hhbmdlPXtoYW5kbGVGaWxlQ2hhbmdlU2luZ2xlfSByZXF1aXJlZCAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSdzdWJtaXQnPlVwbG9hZCBJbWFnZTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGgyPk11bHRpcGxlIEltYWdlIFVwbG9hZDwvaDI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3VwbG9hZGZvcm0nPlxuICAgICAgICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17dXBsb2FkSW1hZ2VNdWx0aXBsZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJldmlld2ZyYW1lJz48aW1nIGNsYXNzTmFtZT0ncHJldmlldycgc3JjPScvaW1hZ2VwbGFjZWhvbGRlci5wbmcnIC8+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj0nZmlsZWlkbXVsdGknPlNlbGVjdCBpbWFnZXM8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSdmaWxlaWRtdWx0aScgdHlwZT0nZmlsZScgYWNjZXB0PSdpbWFnZS8qJyBvbkNoYW5nZT17aGFuZGxlRmlsZUNoYW5nZU11bHRpfSByZXF1aXJlZCBtdWx0aXBsZS8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9J3N1Ym1pdCc+VXBsb2FkIEltYWdlczwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdpbWFnZXMnPlxuICAgICAgICAgICAgICAgICAgICA8aDE+TXkgSW1hZ2VzPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ltYWdlaG9sZGVyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtpbWFnZXMgIT0gbnVsbCA/IGltYWdlcy5tYXAoKGltYWdlLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaSA9PSBpbWFnZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2l9IGNsYXNzTmFtZT0naW1nZnJhbWUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgb25DbGljaz17KGUpID0+IHJlbW92ZUltYWdlKGUsIGltYWdlKX0gY2xhc3NOYW1lPSd4Jz54PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBvbkxvYWQ9e2RvbmVMb2FkaW5nfSBzcmM9e2Jhc2VDb25maWcuYmFja2VuZEltYWdlcyArIGltYWdlfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz57aW1hZ2V9PC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9J2ltZ2ZyYW1lJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IG9uQ2xpY2s9eyhlKSA9PiByZW1vdmVJbWFnZShlLCBpbWFnZSl9IGNsYXNzTmFtZT0neCc+eDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPXtiYXNlQ29uZmlnLmJhY2tlbmRJbWFnZXMgKyBpbWFnZX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+e2ltYWdlLnNwbGl0KCcnKS5tYXAoKGNoYXIsIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaSA+IDE0KSByZXR1cm4gY2hhclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfTwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOiA8aDIgb25DbGljaz17bG9hZEltYWdlc30+TG9hZCBJbWFnZXM8L2gyPn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3NOYW1lPSdsb2FkZXInIHNyYz0nL2xvYWRpbmdfYnViYmxlLmdpZicgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgICAgICAgLmltYWdlaG9sZGVyIHtcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiA5MCU7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDVweCA1JTtcbiAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogNTAwcHg7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgYWxpZ24tY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAubG9hZGVyIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJHtsb2FkaW5nSW1hZ2VzID8gJ2Jsb2NrJzogJ25vbmUnfTtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDUycHg7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogNTJweDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLmltZ2ZyYW1lIHtcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxNTBweDtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMjBweDtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiA4cHg7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyMDAsMjAwLDIwMCwuMik7XG4gICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAxcHggJHtUaGVtZS5jb2xvcnMuZ3VubWV0YWx9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAuaW1nZnJhbWUgaDMge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwO1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTBweCAwO1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LC42KTtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICR7VGhlbWUuY29sb3JzLmd1bm1ldGFsfTtcbiAgICAgICAgICAgICAgICAgICAgZm9udDogMTJweCAnT3BlbiBTYW5zJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLmltZ2ZyYW1lIGltZyB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogNTAlO1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAueCB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDEwcHg7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogMTBweDtcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMCA4cHg7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA0cHg7XG4gICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgZm9udDogMThweCAnUm9ib3RvJztcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAuNztcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIC4zcyBlYXNlO1xuICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiA5OTk7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC54OmhvdmVyIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLmltYWdlcyB7XG4gICAgICAgICAgICAgICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogNjAlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAuaW1hZ2VzIGgxIHtcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQ6IDMwcHggJ01vbnRzZXJyYXQnO1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAzMHB4O1xuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAudXBsb2FkZm9ybSBpbnB1dCB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC51cGxvYWRmb3JtIGxhYmVsIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgICAgICB0b3A6IDYwcHg7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDIwcHg7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogLjc7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAuM3MgZWFzZTtcbiAgICAgICAgICAgICAgICAgICAgZm9udDogMTRweCAnUm9ib3RvJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLnVwbG9hZGZvcm0gbGFiZWw6aG92ZXIge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAudXBsb2FkZm9ybSBidXR0b24ge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogOTBweDtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMjBweDtcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAuNztcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIC4zcyBlYXNlO1xuICAgICAgICAgICAgICAgICAgICBmb250OiAxNHB4ICdSb2JvdG8nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAudXBsb2FkZm9ybSAucHJldmlld2ZyYW1lIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgICAgICByaWdodDogMjBweDtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAyMHB4O1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMzAwcHg7XG4gICAgICAgICAgICAgICAgICAgIG1heC1oZWlnaHQ6IDMwMHB4O1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgYWxpZ24tY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAudXBsb2FkZm9ybSAucHJldmlld2ZyYW1lIGltZyB7XG4gICAgICAgICAgICAgICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAudXBsb2FkZm9ybSBmb3JtIHtcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC51cGxvYWRmb3JtIHtcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDMwMHB4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAjbGVmdCBoMiB7XG4gICAgICAgICAgICAgICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiA5MCU7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggNSU7XG4gICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAxcHggJHtUaGVtZS5jb2xvcnMuY2hhcmNvYWx9O1xuICAgICAgICAgICAgICAgICAgICBmb250OiAyMnB4ICdSYWxld2F5JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgI2xlZnQge1xuICAgICAgICAgICAgICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQwJTtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAuYm9keSB7XG4gICAgICAgICAgICAgICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA5MHB4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGB9PC9zdHlsZT5cbiAgICAgICAgPC9kaXY+XG4gICAgKVxufVxuXG5VcGxvYWRJbWFnZS5nZXRJbml0aWFsUHJvcHMgPSBhc3luYyhlKSA9PiB7XG4gICAgXG4gICAgY29uc3QgZ2V0aW1nID0gYXdhaXQgZmV0Y2goYmFzZUNvbmZpZy5iYXNlVVJMICsgJy9nZXRhbGxpbWFnZXMnLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgfSkudGhlbiAocmVzcG9uc2UgPT4ge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXG4gICAgfSlcbiAgICByZXR1cm4ge2ZpcnN0TG9hZEltYWdlczogZ2V0aW1nLmltYWdlc31cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXBsb2FkSW1hZ2UiXX0= */\n/*@ sourceURL=/Users/williamforte/Canvas/burkedeveloping/pages/backend_host_controller/imageupload.js */`));\n}\n\nUploadImage.getInitialProps = async e => {\n  const getimg = await fetch(baseConfig.baseURL + '/getallimages', {\n    method: 'GET'\n  }).then(response => {\n    return response.json();\n  });\n  return {\n    firstLoadImages: getimg.images\n  };\n};\n\nexport default UploadImage;","map":{"version":3,"sources":["/Users/williamforte/Canvas/burkedeveloping/pages/backend_host_controller/imageupload.js"],"names":["useState","baseConfig","Theme","UploadImage","firstLoadImages","images","setImages","file","setFile","preview","setPreview","multipreview","setMultiPreview","loadingImages","setLoadingImages","uploadImageSingle","e","preventDefault","formData","FormData","append","uploadImage","fetch","baseURL","method","body","then","response","json","loadImages","uploadImageMultiple","console","log","i","length","newupload","handleFileChangeSingle","persist","URL","createObjectURL","target","files","handleFileChangeMulti","mpreview","push","removeImage","image","newremove","status","getImages","doneLoading","colors","gunmetal","charcoal","name","map","backendImages","split","char","getInitialProps","getimg"],"mappings":"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","sourcesContent":["import { useState } from 'react'\nimport { baseConfig } from '../../services/restservice'\nimport Theme from '../../styles/theme'\n\nfunction UploadImage({firstLoadImages}) {\n\n    const [images, setImages] = useState(firstLoadImages)\n    const [file, setFile] = useState(null)\n    const [preview, setPreview] = useState(null)\n    const [multipreview, setMultiPreview] = useState(null)\n    const [loadingImages, setLoadingImages] = useState(false)\n\n    const uploadImageSingle = async(e) => {\n        e.preventDefault()\n        if(file == null) return \n        const formData = new FormData()\n        formData.append(\"myFile\", file)\n        const uploadImage = await fetch(baseConfig.baseURL + '/uploadfile', {\n            method: 'POST',\n            body: formData\n        })\n        .then(response => {\n            return response.json()\n        })\n        if(uploadImage) {\n            setPreview(null)\n            setFile(null)\n            loadImages(e)\n        }\n    }\n\n    const uploadImageMultiple = async(e) => {\n        e.preventDefault()\n        console.log(multipreview)\n        if(multipreview == null) return \n        const formData = new FormData()\n\n        for (let i = 0; i < file.length; i++) {\n            console.log(file[i])\n            formData.append(`myFiles[${i}]`, file[i])\n        }\n\n        console.log(formData)\n        const newupload = await fetch('http://localhost:3600/uploadmultiple', {\n            method: 'POST',\n            body: formData\n        })\n        .then(response => {\n            return response.json()\n        })\n        console.log(newupload)\n        if(newupload) {\n            setMultiPreview(null)\n            setFile(null)\n            console.log(newupload)\n            loadImages(e)\n        }\n    }\n\n    const handleFileChangeSingle = (e) => {\n        e.persist()\n        setPreview(URL.createObjectURL(e.target.files[0]))\n        setFile(e.target.files[0])\n    }\n\n    const handleFileChangeMulti = (e) => {\n        e.persist()\n        setFile(e.target.files)\n        const files = e.target.files;\n        const mpreview = []\n        for (var i = 0; i < files.length; i++) {\n            mpreview.push(URL.createObjectURL(files[i]))\n        }\n        setMultiPreview(mpreview)\n        console.log(mpreview)\n    }\n\n    const removeImage = async(e, image) => {\n        e.preventDefault()\n        setLoadingImages(true)\n        setImages(null)\n        const newremove = await fetch(baseConfig.baseURL + '/removeimage/' + image, {\n            method: 'DELETE',\n        }).then(response => {\n            return response.status\n        })\n        if(newremove) {\n            console.log(newremove)\n            loadImages(e)\n        }\n    }\n\n    const loadImages = async(e) => {\n        e.preventDefault()\n        setLoadingImages(true)\n        const getImages = await fetch('http://localhost:3600/getallimages', {\n            method: 'GET',\n        }).then (response => {\n            return response.json()\n        })\n        if(getImages) {\n            setImages(getImages.images)\n        }\n    }\n\n    const doneLoading = (e) => {\n        e.persist()\n        setLoadingImages(false)\n    }\n\n    return (\n        <div className='body'>\n            <div id=\"left\">\n                <h2>Single Image Upload</h2>\n                <div className='uploadform'>\n                    <form onSubmit={uploadImageSingle}>\n                        <div className='previewframe'><img className='preview' src={preview ? preview: '/imageplaceholder.png'} /></div>\n                        <label htmlFor='fileid'>{file ? file.name: 'Select image'}</label>\n                        <input id='fileid' type='file' accept='image/*' onChange={handleFileChangeSingle} required />\n                        <button type='submit'>Upload Image</button>\n                    </form>\n                </div>\n                <h2>Multiple Image Upload</h2>\n                <div className='uploadform'>\n                    <form onSubmit={uploadImageMultiple}>\n                        <div className='previewframe'><img className='preview' src='/imageplaceholder.png' /></div>\n                        <label htmlFor='fileidmulti'>Select images</label>\n                        <input id='fileidmulti' type='file' accept='image/*' onChange={handleFileChangeMulti} required multiple/>\n                        <button type='submit'>Upload Images</button>\n                    </form>\n                </div>\n            </div>\n            <div className='images'>\n                    <h1>My Images</h1>\n                    <div className='imageholder'>\n                        {images != null ? images.map((image, i) => {\n                            if(i == images.length - 1) {\n                                return (\n                                    <div key={i} className='imgframe'>\n                                        <div onClick={(e) => removeImage(e, image)} className='x'>x</div>\n                                        <img onLoad={doneLoading} src={baseConfig.backendImages + image} />\n                                        <h3>{image}</h3>\n                                    </div>\n                                )\n                            } else {\n                                return (\n                                    <div key={i} className='imgframe'>\n                                        <div onClick={(e) => removeImage(e, image)} className='x'>x</div>\n                                        <img src={baseConfig.backendImages + image} />\n                                        <h3>{image.split('').map((char, i) => {\n                                            if(i > 14) return char\n                                        })}</h3>\n                                    </div>\n                                )\n                            }\n                        }): <h2 onClick={loadImages}>Load Images</h2>}\n                        <img className='loader' src='/loading_bubble.gif' />\n                    </div>\n                </div>\n            <style jsx>{`\n                .imageholder {\n                    float: left;\n                    width: 90%;\n                    padding: 5px 5%;\n                    min-height: 500px;\n                    position: relative;\n                    margin-top: 10px;\n                    display: flex;\n                    flex-wrap: wrap;\n                    justify-content: center;\n                    align-content: center;\n                }\n                .loader {\n                    position: absolute;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                    display: ${loadingImages ? 'block': 'none'};\n                    width: 52px;\n                    height: 52px;\n                }\n                .imgframe {\n                    float: left;\n                    width: 150px;\n                    height: 120px;\n                    margin: 8px;\n                    overflow: hidden;\n                    position: relative;\n                    background: rgba(200,200,200,.2);\n                    box-shadow: 0 0 1px ${Theme.colors.gunmetal};\n                }\n                .imgframe h3 {\n                    position: absolute;\n                    bottom: 0;\n                    text-align: center;\n                    left: 0;\n                    width: 100%;\n                    padding: 10px 0;\n                    background: rgba(255,255,255,.6);\n                    color: ${Theme.colors.gunmetal};\n                    font: 12px 'Open Sans';\n                }\n                .imgframe img {\n                    position: absolute;\n                    width: 100%;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                }\n                .x {\n                    position: absolute;\n                    right: 10px;\n                    top: 10px;\n                    padding: 0 8px;\n                    padding-bottom: 4px;\n                    text-align: center;\n                    font: 18px 'Roboto';\n                    cursor: pointer;\n                    opacity: .7;\n                    transition: all .3s ease;\n                    z-index: 999;\n                    background: rgba(255,255,255,1);\n                }\n                .x:hover {\n                    opacity: 1;\n                }\n                .images {\n                    float: left;\n                    width: 60%;\n                }\n                .images h1 {\n                    float: left;\n                    font: 30px 'Montserrat';\n                    margin: 0;\n                    margin-left: 30px;\n                    padding: 10px;\n                }\n                .uploadform input {\n                    display: none;\n                }\n                .uploadform label {\n                    position: absolute;\n                    top: 60px;\n                    left: 20px;\n                    padding: 10px;\n                    cursor: pointer;\n                    opacity: .7;\n                    transition: all .3s ease;\n                    font: 14px 'Roboto';\n                }\n                .uploadform label:hover {\n                    opacity: 1;\n                }\n                .uploadform button {\n                    position: absolute;\n                    bottom: 90px;\n                    left: 20px;\n                    padding: 10px;\n                    cursor: pointer;\n                    opacity: .7;\n                    transition: all .3s ease;\n                    font: 14px 'Roboto';\n                }\n                .uploadform .previewframe {\n                    position: absolute;\n                    right: 20px;\n                    top: 20px;\n                    width: 300px;\n                    max-height: 300px;\n                    overflow: hidden;\n                    display: flex;\n                    justify-content: center;\n                    align-content: center;\n                }\n                .uploadform .previewframe img {\n                    float: left;\n                    width: 100%;\n                    height: auto;\n                }\n                .uploadform form {\n                    float: left;\n                    width: 100%;\n                    height: 100%;\n                }\n                .uploadform {\n                    float: left;\n                    width: 100%;\n                    position: relative;\n                    min-height: 300px;\n                }\n                #left h2 {\n                    float: left;\n                    margin: 0;\n                    width: 90%;\n                    padding: 10px 5%;\n                    box-shadow: 0 0 1px ${Theme.colors.charcoal};\n                    font: 22px 'Raleway';\n                }\n                #left {\n                    float: left;\n                    width: 40%;\n                    height: 100%;\n                }\n                .body {\n                    float: left;\n                    width: 100%;\n                    height: 100%;\n                    margin-top: 90px;\n                }\n            `}</style>\n        </div>\n    )\n}\n\nUploadImage.getInitialProps = async(e) => {\n    \n    const getimg = await fetch(baseConfig.baseURL + '/getallimages', {\n        method: 'GET',\n    }).then (response => {\n        return response.json()\n    })\n    return {firstLoadImages: getimg.images}\n}\n\nexport default UploadImage"]},"metadata":{},"sourceType":"module"}