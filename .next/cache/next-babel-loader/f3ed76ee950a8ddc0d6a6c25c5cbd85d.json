{"ast":null,"code":"import Router from 'next/router';\nimport { Cookies } from 'react-cookie';\nimport jwt_decode from 'jwt-decode';\nconst cookies = new Cookies();\nexport const backendImages = \"http://localhost:3600/ftp/\";\nexport async function createProfile(firstname, lastname, email, password) {\n  // Request data to post to createprofile route on rest api\n  fetch('http://localhost:3600/users', {\n    method: 'POST',\n    headers: {\n      \"Content-type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      \"firstName\": firstname,\n      \"lastName\": lastname,\n      \"email\": email,\n      \"password\": password\n    })\n  }).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    console.log('Request succeeded with JSON response', data);\n  }).catch(function (error) {\n    console.log('Request failed', error);\n  });\n}\nexport async function loginRequest(email, password) {\n  // New Login Data request\n  const newLogin = await fetch('http://localhost:3600/auth', {\n    method: 'POST',\n    headers: {\n      \"Content-type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      \"email\": email,\n      \"password\": password\n    })\n  }).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    cookies.set('accessToken', data.accessToken);\n    cookies.set('refreshToken', data.refreshToken);\n    const decoded = jwt_decode(data.accessToken);\n    cookies.set('name', decoded.name);\n    cookies.set('email', decoded.email);\n    cookies.set('refreshKey', decoded.refreshKey);\n    cookies.set('permission_level', decoded.permissionLevel);\n    cookies.set('userId', decoded.userId);\n    Router.push(\"/\");\n  }).catch(function (error) {\n    return error;\n  });\n\n  if (newLogin) {\n    return \"Username/Password does not match our records!\";\n  }\n}\nexport async function Logout() {\n  cookies.remove('accessToken');\n  cookies.remove('refreshToken');\n  cookies.remove('name');\n  cookies.remove('email');\n  cookies.remove('refreshKey');\n  cookies.remove('userId');\n  await Router.push(\"/login\");\n}\nexport async function createTask(objective, status) {\n  const getCookies = cookies.getAll(); // New Login Data request\n\n  const newTask = await fetch('http://localhost:3600/tasks', {\n    method: 'POST',\n    headers: {\n      \"Content-type\": \"application/json\",\n      \"Authorization\": `Bearer ${getCookies.accessToken}`\n    },\n    body: JSON.stringify({\n      \"objective\": objective,\n      \"status\": status\n    })\n  }).then(function (response) {\n    return response.json();\n  }).catch(function (error) {\n    return error;\n  });\n\n  if (newTask) {\n    return newTask;\n  }\n}\nexport async function getTasks(limit, token) {\n  const getCookies = cookies.getAll(); // New Login Data request\n\n  const newTask = await fetch('http://localhost:3600/tasks', {\n    method: 'GET',\n    headers: {\n      \"Content-type\": \"application/json\",\n      \"Authorization\": `Bearer ${getCookies.accessToken ? getCookies.accessToken : token}`\n    },\n    query: JSON.stringify({\n      \"limit\": limit\n    })\n  }).then(function (response) {\n    if (response.status == 403) {\n      return 'Not Authorized';\n    }\n\n    return response.json();\n  }).catch(function (error) {\n    return error;\n  });\n\n  if (newTask) {\n    return newTask;\n  }\n}\nexport async function removeTask(taskId) {\n  const getCookies = cookies.getAll(); // New Login Data request\n\n  const newTask = await fetch(`http://localhost:3600/tasks/${taskId}`, {\n    method: 'DELETE',\n    headers: {\n      \"Authorization\": `Bearer ${getCookies.accessToken ? getCookies.accessToken : token}`\n    }\n  }).then(function (response) {\n    return response.json();\n  }).catch(function (error) {\n    return error;\n  });\n\n  if (newTask) {\n    return newTask;\n  }\n}\nexport async function updateTaskStatus(taskId, newstatus) {\n  const getCookies = cookies.getAll(); // New Login Data request\n\n  const newTask = await fetch(`http://localhost:3600/tasks/${taskId}`, {\n    method: 'PATCH',\n    headers: {\n      \"Content-type\": \"application/json\",\n      \"Authorization\": `Bearer ${getCookies.accessToken ? getCookies.accessToken : token}`\n    },\n    body: JSON.stringify({\n      \"status\": newstatus\n    })\n  }).then(function (response) {\n    return response.json();\n  }).catch(function (error) {\n    return error;\n  });\n\n  if (newTask) {\n    return newTask;\n  }\n}","map":null,"metadata":{},"sourceType":"module"}