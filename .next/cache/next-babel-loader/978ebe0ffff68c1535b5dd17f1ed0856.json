{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport BannerSlider from '../components/banner';\nimport Theme from '../styles/theme';\nimport nextCookie from 'next-cookies';\nimport { createTask, getTasks, removeTask, updateTaskStatus } from '../services/apiservice';\nimport { useState, useEffect } from 'react';\nimport Router from 'next/router';\nvar sortingOrder = {\n  'inprogress': 1,\n  'created': 2,\n  'done': 3\n};\n\nfunction compare(key) {\n  var order = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'asc';\n  return function (a, b) {\n    if (!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) return 0;\n    var first = a[key].toLowerCase() in sortingOrder ? sortingOrder[a[key]] : Number.MAX_SAFE_INTEGER;\n    var second = b[key].toLowerCase() in sortingOrder ? sortingOrder[b[key]] : Number.MAX_SAFE_INTEGER;\n    var result = 0;\n    if (first < second) result = -1;else if (first > second) result = 1;\n    return order === 'desc' ? ~result : result;\n  };\n}\n\nfunction Backend(_ref) {\n  var getFirstLoad = _ref.getFirstLoad;\n\n  var _useState = useState({\n    objective: '',\n    status: 'created'\n  }),\n      inputs = _useState[0],\n      setInputs = _useState[1];\n\n  var _useState2 = useState(getFirstLoad != null ? getFirstLoad : null),\n      allTasks = _useState2[0],\n      setAllTasks = _useState2[1];\n\n  var _useState3 = useState(getFirstLoad != null ? 'succeeded' : 'none'),\n      status = _useState3[0],\n      setStatus = _useState3[1];\n\n  var lastcat = null; // Create a new Task DEFAULT: status: 'created'\n\n  var createNewTask = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var newTask;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.next = 3;\n              return createTask(inputs.objective, inputs.status);\n\n            case 3:\n              newTask = _context.sent;\n\n              if (newTask) {\n                console.log(newTask);\n                setInputs(_objectSpread(_objectSpread({}, inputs), {}, {\n                  objective: ''\n                }));\n                updateTasks(e);\n              }\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function createNewTask(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // Updating Tasks with Backend\n\n\n  var updateTasks = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var getalltasks;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setStatus('loading');\n              _context2.next = 3;\n              return getTasks(50, null);\n\n            case 3:\n              getalltasks = _context2.sent;\n\n              if (getalltasks) {\n                console.log(getalltasks);\n                getalltasks.sort(compare('status'));\n                setAllTasks(getalltasks);\n                setStatus('succeeded');\n              }\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function updateTasks(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var removeThisTask = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e, task_id) {\n      var removenewtask;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              e.preventDefault();\n              _context3.next = 3;\n              return removeTask(task_id);\n\n            case 3:\n              removenewtask = _context3.sent;\n\n              if (removenewtask) {\n                console.log(removenewtask);\n                updateTasks(e);\n              }\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function removeThisTask(_x3, _x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var updateThisTask = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e, task_id, status) {\n      var updatenewtask;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              e.preventDefault();\n              _context4.next = 3;\n              return updateTaskStatus(task_id, status);\n\n            case 3:\n              updatenewtask = _context4.sent;\n\n              if (updatenewtask) {\n                console.log(updatenewtask);\n                updateTasks(e);\n              }\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function updateThisTask(_x5, _x6, _x7) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var isTyping = function isTyping(e) {\n    e.persist();\n    setInputs(_objectSpread(_objectSpread({}, inputs), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]]) + \" \" + 'body'\n  }, __jsx(\"img\", {\n    id: \"body_bg\",\n    src: \"/bg_login.png\",\n    className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]])\n  }), __jsx(\"div\", {\n    id: \"abovelayer\",\n    className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]])\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]]) + \" \" + 'sideleft'\n  }, __jsx(\"form\", {\n    onSubmit: createNewTask,\n    className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]])\n  }, __jsx(\"h1\", {\n    className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]])\n  }, \"New Task\"), __jsx(\"textarea\", {\n    name: \"objective\",\n    onChange: isTyping,\n    value: inputs.objective,\n    placeholder: \"Objective\",\n    required: true,\n    className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]])\n  }), __jsx(\"button\", {\n    className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]])\n  }, \"Add Task\")), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]]) + \" \" + 'tasklist'\n  }, __jsx(\"h1\", {\n    className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]])\n  }, \"My Tasks\"), allTasks ? allTasks.map(function (task, i) {\n    var nextStatus = task.status == 'created' ? 'inprogress' : 'done';\n\n    if (lastcat == task.status) {\n      return __jsx(\"div\", {\n        key: i,\n        className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]]) + \" \" + 'task'\n      }, __jsx(\"h2\", {\n        className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]])\n      }, \"Objective: \", task.objective), __jsx(\"h3\", {\n        className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]])\n      }, \"Status: \", task.status), __jsx(\"img\", {\n        src: \"/three_dots.png\",\n        className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]]) + \" \" + 'threedots'\n      }), __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]]) + \" \" + 'floater'\n      }, __jsx(\"div\", {\n        onClick: function onClick(e) {\n          task.status = nextStatus;\n          updateThisTask(e, task.id, nextStatus);\n        },\n        className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]]) + \" \" + 'update'\n      }, \"Update Status\"), __jsx(\"div\", {\n        onClick: function onClick(e) {\n          return removeThisTask(e, task.id);\n        },\n        className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]]) + \" \" + 'remove'\n      }, \"Remove Task\")));\n    } else {\n      lastcat = task.status;\n      return __jsx(React.Fragment, null, __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]]) + \" \" + 'cat'\n      }, task.status.toUpperCase()), __jsx(\"div\", {\n        key: i,\n        className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]]) + \" \" + 'task'\n      }, __jsx(\"h2\", {\n        className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]])\n      }, \"Objective: \", task.objective), __jsx(\"h3\", {\n        className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]])\n      }, \"Status: \", task.status), __jsx(\"img\", {\n        src: \"/three_dots.png\",\n        className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]]) + \" \" + 'threedots'\n      }), __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]]) + \" \" + 'floater'\n      }, __jsx(\"div\", {\n        onClick: function onClick(e) {\n          return updateThisTask(e, task.id, 'inprogress');\n        },\n        className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]]) + \" \" + 'update'\n      }, \"Update Status\"), __jsx(\"div\", {\n        onClick: function onClick(e) {\n          return removeThisTask(e, task.id);\n        },\n        className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]]) + \" \" + 'remove'\n      }, \"Remove Task\"))));\n    }\n  }) : status == 'none' ? __jsx(\"h2\", {\n    className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]])\n  }, \"No Tasks yet\") : __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3804077584\", [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]]]) + \" \" + 'loading'\n  })))), __jsx(_JSXStyle, {\n    id: \"3804077584\",\n    dynamic: [Theme.colors.coral, Theme.colors.coral, Theme.colors.coral, Theme.colors.coral]\n  }, [\".body.__jsx-style-dynamic-selector{float:left;width:100%;height:100%;z-index:1;overflow:hidden;}\", \".cat.__jsx-style-dynamic-selector{float:left;width:90%;padding:10px 5%;color:white;font:12px 'Roboto';background:\".concat(Theme.colors.coral, \";}\"), \".update.__jsx-style-dynamic-selector{float:left;width:130px;text-align:center;font:12px 'Open Sans';padding:6px;opacity:.9;color:white;border-radius:8px;background:rgba(70,70,70,.6);-webkit-transition:opacity .4s ease;transition:opacity .4s ease;cursor:pointer;}\", \".update.__jsx-style-dynamic-selector:hover{opacity:1;}\", \".remove.__jsx-style-dynamic-selector{float:left;width:75px;text-align:center;font:12px 'Open Sans';margin-left:10px;padding:6px;opacity:.9;color:white;border-radius:8px;background:rgba(226,70,70,.8);cursor:pointer;}\", \".remove.__jsx-style-dynamic-selector:hover{opacity:1;}\", \".threedots.__jsx-style-dynamic-selector{position:absolute;top:-5px;right:-5px;width:20px;height:20px;padding:15px;cursor:pointer;}\", \".threedots.__jsx-style-dynamic-selector:hover~.floater.__jsx-style-dynamic-selector,.floater.__jsx-style-dynamic-selector:hover{opacity:1;-webkit-transform:translateX(100%) scale(1,1);-ms-transform:translateX(100%) scale(1,1);transform:translateX(100%) scale(1,1);}\", \".floater.__jsx-style-dynamic-selector{position:absolute;right:-2px;top:10px;-webkit-transform:translateX(0) scale(0,0);-ms-transform:translateX(0) scale(0,0);transform:translateX(0) scale(0,0);padding:4px;opacity:0;overflow:hidden;-webkit-transition:opacity .2s ease,-webkit-transform .4s;-webkit-transition:opacity .2s ease,transform .4s;transition:opacity .2s ease,transform .4s;border-radius:10px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);background:rgba(255,255,255,.7);box-shadow:0 0 1px rgba(20,20,20,.6);z-index:90;}\", \".task.__jsx-style-dynamic-selector{float:left;width:90%;padding:10px 5%;position:relative;border-top:1px solid \".concat(Theme.colors.coral, \";}\"), \".task.__jsx-style-dynamic-selector h2.__jsx-style-dynamic-selector{float:left;width:90%;padding:5px 5%;margin:0;font:14px 'Montserrat';}\", \".task.__jsx-style-dynamic-selector h3.__jsx-style-dynamic-selector{float:left;width:90%;padding:5px 5%;margin:0;font:12px 'Roboto';opacity:.8;}\", \"#abovelayer.__jsx-style-dynamic-selector{float:left;width:100%;height:100%;z-index:99;position:relative;margin-top:80px;}\", \"#abovelayer.__jsx-style-dynamic-selector textarea.__jsx-style-dynamic-selector{float:left;margin:10px 2.5%;padding:10px 2.5%;width:90%;font:18px 'Roboto';border:none;resize:vertical;max-height:150px;min-height:30px;border-radius:6px;box-shadow:0 0 2px rgba(20,20,20,.8);}\", \".sideleft.__jsx-style-dynamic-selector{float:left;width:23%;height:100%;z-index:99;margin:10px 1%;border-radius:10px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);background:rgba(255,255,255,.7);box-shadow:0 0 2px rgba(20,20,20,.8);}\", \".sideleft.__jsx-style-dynamic-selector h1.__jsx-style-dynamic-selector{float:left;margin:10px 5%;width:90%;font:20px 'Montserrat';}\", \".sideleft.__jsx-style-dynamic-selector form.__jsx-style-dynamic-selector{float:left;min-height:200px;width:90%;border-bottom:2px solid \".concat(Theme.colors.coral, \";padding:10px 5%;}\"), \".sideleft.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector{float:left;width:90%;padding:10px 5%;background:\".concat(Theme.colors.coral, \";color:white;cursor:pointer;border:none;border-radius:8px;margin:10px 5%;}\"), \"#body_bg.__jsx-style-dynamic-selector{width:100%;z-index:-20;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%) scale(1.1,1.1);-ms-transform:translate(-50%,-50%) scale(1.1,1.1);transform:translate(-50%,-50%) scale(1.1,1.1);}\"]));\n}\n\nBackend.getInitialProps = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(ctx) {\n    var cookies, getfirsttasks;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return nextCookie(ctx);\n\n          case 2:\n            cookies = _context5.sent;\n            _context5.next = 5;\n            return getTasks(50, cookies.accessToken);\n\n          case 5:\n            getfirsttasks = _context5.sent;\n\n            if (getfirsttasks == 'Not Authorized') {\n              if (ctx.res) {\n                ctx.res.writeHead(301, {\n                  Location: '/login'\n                });\n                ctx.res.end();\n              }\n            }\n\n            getfirsttasks.sort(compare('status'));\n            return _context5.abrupt(\"return\", {\n              getFirstLoad: getfirsttasks\n            });\n\n          case 9:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function (_x8) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\nexport default Backend;","map":null,"metadata":{},"sourceType":"module"}